(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{125:function(e,t,a){},196:function(e,t,a){},201:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(35),s=a.n(c),o=(a(125),a(0)),i=a.n(o),u=a(5),l=a(2),j=a(214),d=(a(90),a(117)),b=a(21),O=a(59),h=a.n(O);a(111).config();var f="/api/user/";console.log(f);var p={login:function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/api/user/login",t);case 3:return a=e.sent,n={code:a.status,data:a.data},e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),void 0===(r=e.t0.response)){e.next=16;break}return c={code:r.status,message:r.data.error},e.abrupt("return",c);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,h.a.post("/api/user/register",t);case 5:return a=e.sent,n={code:a.status,message:a.data.message},e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(2),r=e.t0.response,c={code:r.status,message:r.data.error},e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()};a(111).config();var x={getDataFromMongo:function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/data/getactivities",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateDataToMongo:function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/data/getstravaactivities",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=a(49),g=a(221),v=a(215),y=a(223),w=a(218),k=a.p+"static/media/logo.596a690d.svg",S=a(6),C=function(){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{style:{paddingLeft:"10px",paddingTop:"10px"},children:[Object(S.jsx)("div",{style:{color:"white",fontSize:"30px"},children:"Py\xf6r\xe4ilyaktiviteettien data-analytiikka"}),Object(S.jsx)("h6",{style:{color:"#609CE1",marginTop:"8px"},children:"2022 \xa9AA4598"})]}),Object(S.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(S.jsx)("img",{src:k,width:"40%",style:{marginTop:"50px"},alt:""})})]})},F=a(33),_=a(220),D=a(212),N=a(101),A=a.n(N),E=(a(152),function(e){var t=e.mode,a=e.item,r=e.func,c=e._selectedIndex,s=Object(n.useState)(["Moving time","Distance","Average speed","Average heartrate"]),o=Object(l.a)(s,1)[0],i=Object(n.useState)(""),u=Object(l.a)(i,2),j=u[0],d=(u[1],Object(n.useState)(new Date)),b=Object(l.a)(d,2),O=b[0],h=b[1],f=Object(n.useState)(new Date),p=Object(l.a)(f,2),x=p[0],m=p[1],g=Object(n.useState)(o[0]),v=Object(l.a)(g,2),w=v[0],k=v[1],C=Object(n.useState)(0),F=Object(l.a)(C,2),N=F[0],E=F[1];Object(n.useEffect)((function(){E(null!==c&&0!==t?c:0)}),[c,t]);if(2===t){var M=[function(e){var t=new Date(e),a=(t.getMonth()+1).toString(),n=t.getDate().toString(),r=t.getFullYear().toString();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),a+"/"+n+"/"+r}(a.start_date),a.moving_time,a.distance,a.average_speed,a.average_heartrate],z={background:"#7AABFF"};return Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[M.map((function(e,t){return t===N+1?Object(S.jsx)("td",{style:z,children:e},t):Object(S.jsxs)("td",{children:[" ",e," "]},t)})),Object(S.jsx)("td",{style:{textAlign:"right"}})]})})}return Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)(A.a,{type:"date",className:"form-control",id:"dp",required:!0,selected:O,onChange:function(e){return h(e)}})}),Object(S.jsx)("td",{children:Object(S.jsx)(A.a,{type:"date",className:"form-control",id:"dp2",required:!0,selected:x,onChange:function(e){return m(e)}})}),Object(S.jsx)("td",{children:Object(S.jsx)(_.a.Control,{as:"select",id:"type",custom:!0,value:w,onChange:function(e){var t=e.target;E(t.selectedIndex),k(t.value)},children:o.map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})}),Object(S.jsx)("td",{children:Object(S.jsx)(y.a,{type:"submit",className:"float-right btn btn-success",id:j,onClick:function(e){var a;a=e,e.target.id,""!==O&&""!==x&&(a.preventDefault(),0===t&&r(5,{startDate:O,endDate:x},N))},children:Object(S.jsx)(D.a,{id:j})})}),Object(S.jsx)("td",{})]})})}),M=a(213),z=(a(196),function(e){var t=e.mode,a=e.data,r=e.header,c=e.func,s=Object(n.useState)(0),o=Object(l.a)(s,2),i=o[0],u=o[1],j=function(e,t,a){c(e,t),u(a)},d=function(e){var t=e.header;return Object(S.jsx)("tbody",{children:Object(S.jsx)("tr",{children:t.map((function(e,t){return Object(S.jsx)("td",{style:{background:"#091834",color:"#79abff"},children:e},t)}))})})};return Object(S.jsx)(_.a,{className:"overflow-auto form",style:{maxHeight:"587px"},autoComplete:"off",children:Object(S.jsxs)(M.a,{className:"table table-sm table-primary",responsive:"sm",children:[a.length>0&&Object(S.jsx)(d,{header:r}),a.length>0&&a.map((function(e){return Object(S.jsx)(E,{mode:t,item:e,func:j,_selectedIndex:i},e.ride_id)}))]})})}),B=a(216),q=a(116),H=a(222),L=function(e){var t=e.show,a=e.close,n=e.params,r={backgroundColor:n.style.backgroundcolor,color:n.style.color,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return Object(S.jsxs)("div",{children:[n.autohide&&Object(S.jsxs)(H.a,{style:r,onClose:function(){return a()},show:t,delay:n.delay,autohide:!0,children:[Object(S.jsx)(H.a.Header,{style:{backgroundColor:"black",color:"white"},children:Object(S.jsx)("strong",{className:"mr-auto",children:n.header})}),Object(S.jsx)(H.a.Body,{children:n.message})]}),!n.autohide&&Object(S.jsxs)(H.a,{style:r,onClose:function(){return a()},show:t,children:[Object(S.jsx)(H.a.Header,{children:Object(S.jsx)("strong",{className:"mr-auto",children:n.header})}),Object(S.jsx)(H.a.Body,{children:n.message})]})]})},I=a(56),P=a.n(I),T=function(e){var t,a,r=e.df,c=e._years,s=Object(n.useState)("bar"),o=Object(l.a)(s,2),i=o[0],u=o[1],j=Object(n.useState)([]),d=Object(l.a)(j,2),b=(d[0],d[1]),O=Object(n.useState)([]),h=Object(l.a)(O,2),f=h[0],p=h[1],x=[];c.forEach((function(e){var n=r.loc({columns:["distance","start_date"]});t=Object(F.c)(n.start_date).year().eq(e),n=n.loc({rows:t}),a=n.distance.sum(),a=Math.round(a/1e3),x.push(a)})),Object(n.useEffect)((function(){p(c),b(x)}),[]);var m=[{type:i,x:f,y:x}];return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{id:"plot_div"}),Object(S.jsx)(P.a,{data:m,layout:{plot_bgcolor:"#133863",paper_bgcolor:"#133863",xaxis:{title:"Year",showline:!0,zeroline:!1,color:"#00FFFF"},yaxis:{title:"Km",showline:!1,zeroline:!1,color:"#00FFFF"},legend:{font:{family:"Arial",size:12,color:"#14a2b8"}}},config:{displayModeBar:!1},useResizeHandler:!0,style:{width:"90%",height:"90%"}}),Object(S.jsx)(_.a.Control,{className:"float-right mr-5 btn",style:{width:"auto"},as:"select",id:"type",custom:!0,value:i,onChange:function(e){var t=e.target;u(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})]})},G=a(12),R=function(e){var t=e.df,a=e._years,r=Object(n.useState)("bar"),c=Object(l.a)(r,2),s=c[0],o=c[1],i=Object(n.useState)(a[0]),u=Object(l.a)(i,2),j=u[0],d=u[1],b=Object(n.useState)([]),O=Object(l.a)(b,2),h=(O[0],O[1],Object(n.useState)([])),f=Object(l.a)(h,2),p=f[0],x=f[1],m=Object(n.useState)(Object(G.a)(Array(12).keys()).map((function(e){return e+1}))),g=Object(l.a)(m,2),v=g[0],y=(g[1],t.loc({columns:["distance","start_date"]})),w=parseInt(j),k=Object(F.c)(y.start_date).year().eq(w);y=y.loc({rows:k});for(var C=[],D=0;D<12;D++){k=Object(F.c)(y.start_date).month().eq(D);var N=y.loc({rows:k}).distance.sum();N=Math.round(N/1e3),C.push(N)}Object(n.useEffect)((function(){x(a)}),[]);var A=[{type:s,x:v,y:C}];return Object(S.jsxs)("div",{children:[Object(S.jsx)(P.a,{data:A,layout:{plot_bgcolor:"#133863",paper_bgcolor:"#133863",xaxis:{title:"Month",showline:!0,zeroline:!1,color:"#00FFFF"},yaxis:{title:"Km",showline:!1,zeroline:!1,color:"#00FFFF"},legend:{font:{family:"Arial",size:12,color:"#14a2b8"}}},config:{displayModeBar:!1},useResizeHandler:!0,style:{width:"90%",height:"90%"}}),Object(S.jsx)(_.a.Control,{className:"float-right mr-5 btn",style:{width:"auto"},as:"select",id:"type",custom:!0,value:s,onChange:function(e){var t=e.target;o(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))}),Object(S.jsx)(_.a.Control,{className:"float-right mr-1 btn",style:{width:"auto"},as:"select",id:"type",custom:!0,value:j,onChange:function(e){var t=e.target;d(t.value)},children:p.map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})]})},U=function(e){for(var t=e.df,a=e._years,r=Object(n.useState)("bar"),c=Object(l.a)(r,2),s=c[0],o=c[1],i=Object(n.useState)(a[0]),u=Object(l.a)(i,2),j=(u[0],u[1],Object(n.useState)([])),d=Object(l.a)(j,2),b=(d[0],d[1],Object(n.useState)([])),O=Object(l.a)(b,2),h=O[0],f=O[1],p=Object(n.useState)(Object(G.a)(Array(12).keys()).map((function(e){return e+1}))),x=Object(l.a)(p,2),m=x[0],g=(x[1],[]),v=0;v<a.length;v++){var y=t.loc({columns:["distance","start_date"]}),w=parseInt(a[v]),k=Object(F.c)(y.start_date).year().eq(w);y=y.loc({rows:k});for(var C=[],D=0;D<12;D++){k=Object(F.c)(y.start_date).month().eq(D);var N=y.loc({rows:k}).distance.sum();N=Math.round(N/1e3),C.push(N)}g[v]=C}Object(n.useEffect)((function(){f(a)}),[]);for(var A=[],E=0;E<h.length;E++)A.push({type:s,name:h[E],x:m,y:g[E]});return Object(S.jsxs)("div",{children:[Object(S.jsx)(P.a,{data:A,layout:{plot_bgcolor:"#133863",paper_bgcolor:"#133863",xaxis:{title:"Month",showline:!0,zeroline:!1,color:"#00FFFF"},yaxis:{title:"Km",showline:!1,zeroline:!1,color:"#00FFFF"},legend:{font:{family:"Arial",size:12,color:"#14a2b8"}}},config:{displayModeBar:!1},useResizeHandler:!0,style:{width:"90%",height:"90%"}}),Object(S.jsx)(_.a.Control,{className:"float-right mr-5 btn",style:{width:"auto"},as:"select",id:"type",custom:!0,value:s,onChange:function(e){var t=e.target;o(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})]})},Y=function(e){var t=e.callBack,a=(e.user,Object(n.useState)()),r=Object(l.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(),d=Object(l.a)(o,2),b=d[0],O=d[1],h=Object(n.useState)(2),f=Object(l.a)(h,2),p=f[0],x=f[1],m=Object(n.useState)(["Distance"]),w=Object(l.a)(m,2),C=w[0],D=(w[1],Object(n.useState)(["Distance"])),N=Object(l.a)(D,2),A=N[0],E=N[1],M=Object(n.useState)([]),H=Object(l.a)(M,2),I=H[0],P=H[1],G=Object(n.useState)(0),Y=Object(l.a)(G,2),J=Y[0],K=Y[1],Q=Object(n.useState)(!1),W=Object(l.a)(Q,2),V=W[0],X=W[1],Z=Object(n.useState)({header:"",message:"",autohide:!1,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),$=Object(l.a)(Z,2),ee=$[0];$[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("getActivitiesData");case 2:return a=e.sent,n=new F.a(a),console.log(n),e.t0=O,e.next=8,te(n);case 8:e.t1=e.sent,(0,e.t0)(e.t1),s(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var te=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t.loc({columns:["start_date"]})).start_date=Object(F.c)(a.start_date).year(),a=a.loc({columns:["start_date"]}),n=new F.b(a.start_date.values),e.abrupt("return",n.unique().values);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(u.a)(i.a.mark((function e(t,a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===t?(P([[]]),x(t)):5===t&&ne(a);case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,s,o,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.startDate,n=t.endDate,a=new Date(a.setUTCHours(0,0,0,0)),n=new Date(n.setUTCHours(23,59,0,0)),a=a.toISOString(),n=n.toISOString(),r=c.loc({columns:["ride_id","start_date","moving_time","distance","average_speed","average_heartrate"]}),s=[],o=0;o<r.index.length;o++)(u=r.at(o,"start_date"))>=a&&u<=n&&(console.log(u),l=r.iloc({rows:[o]}).toJSON(),console.log("----------------------------------"),l[0].distance=l[0].distance/1e3,l[0].average_speed=(l[0].distance/l[0].moving_time*3600).toFixed(2),s.push(l[0]));P(s),x(2);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=["Start","End","Topic"," ",""];return 2===p&&(re=["Date","Moving time (s)","Distance (km)","Avg speed (km/h)","Avg hr (bpm)"," "]),Object(S.jsxs)(j.a,{children:[Object(S.jsxs)(g.a,{style:{background:"#000000"},variant:"dark",children:[Object(S.jsx)(g.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(S.jsx)(v.a,{className:"float-left",children:Object(S.jsx)(_.a.Control,{className:"mr-1 btn btn-info",style:{width:"auto",background:"#000000",color:"#00FFFF",borderStyle:"none",fontSize:"20px"},as:"select",id:"type",custom:!0,value:A,onChange:function(e){var t=e.target;E(t.value)},children:C.map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})}),Object(S.jsx)(v.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"outline-success",onClick:function(){K(1)},children:"Years"})}),Object(S.jsx)(v.a,{className:"ml-2",children:Object(S.jsx)(y.a,{variant:"outline-success",onClick:function(){K(2)},children:"Months"})}),Object(S.jsx)(v.a,{className:"ml-2",children:Object(S.jsx)(y.a,{variant:"outline-info",onClick:function(){K(4)},children:"Summary"})}),Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{className:"ml-2",variant:"outline-primary",onClick:function(){ae(0,null),K(3)},children:"Query"})})]}),Object(S.jsx)(B.a,{children:Object(S.jsx)(q.a,{children:Object(S.jsx)("h2",{children:" "})})}),0===J&&Object(S.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(S.jsx)("img",{src:k,width:"50%",style:{marginTop:"50px"},alt:""})}),1===J&&Object(S.jsx)(T,{df:c,_years:b}),2===J&&Object(S.jsx)(R,{df:c,_years:b}),4===J&&Object(S.jsx)(U,{df:c,_years:b}),3===J&&Object(S.jsx)(z,{mode:p,data:I,header:re,func:ae}),Object(S.jsx)(L,{show:V,close:function(){X(!1)},params:ee})]})},J=a(219),K=a(217),Q=function(e){var t=e.show,a=e.message;return Object(S.jsx)(J.a,{show:t,size:"sm",backdrop:"static",keyboard:!1,centered:!0,children:Object(S.jsxs)(y.a,{variant:"primary",disabled:!0,children:[Object(S.jsx)(K.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),Object(S.jsx)("span",{children:"\xa0\xa0\xa0"}),a]})})},W=function(e){var t=e.user,a=e.admin,r=e.callBack,c=e.progress,s=Object(n.useState)(!1),o=Object(l.a)(s,2),i=o[0],u=o[1],j=Object(b.f)().pathname;return Object(n.useEffect)((function(){u(c)}),[c]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Q,{show:i,message:"Updating db..."}),Object(S.jsxs)(g.a,{style:{background:"#091834"},variant:"light",children:[Object(S.jsx)(g.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(S.jsx)(m.b,{to:"/",className:"mr-auto",children:Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{variant:"success",children:Object(S.jsx)(w.a,{color:"white",size:22})})})}),t&&Object(S.jsxs)(S.Fragment,{children:["/"===j&&Object(S.jsx)(m.b,{to:"/MyActivities",className:"ml-auto",children:Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{variant:"outline-warning",children:"Activities"})})}),a&&"/"===j&&Object(S.jsx)(v.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"outline-danger",onClick:function(){r("updateDb")},children:"Update Db"})}),Object(S.jsx)("div",{className:"ml-auto",style:{paddingRight:"15px",color:"darkcyan"},children:"Logged in: "+t}),Object(S.jsx)(m.b,{to:"/",children:Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{variant:"dark",onClick:function(){r("logout")},children:"Log out"})})})]}),!t&&Object(S.jsx)(v.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"info",onClick:function(){r("login")},children:"Log in"})})]}),Object(S.jsxs)(b.d,{children:[Object(S.jsx)(b.b,{path:"/",element:Object(S.jsx)(C,{})}),Object(S.jsx)(b.b,{path:"/MyActivities",element:t?Object(S.jsx)(Y,{callBack:r,user:t}):Object(S.jsx)(b.a,{to:"/",replace:!0})}),Object(S.jsx)(b.b,{path:"*",element:Object(S.jsx)(b.a,{to:"/"})})]})]})},V=function(e){var t=e.show,a=e.close,r=e.func,c=Object(n.useState)(""),s=Object(l.a)(c,2),o=s[0],j=s[1],d=Object(n.useState)(""),b=Object(l.a)(d,2),O=b[0],h=b[1],f=Object(n.useState)(""),p=Object(l.a)(f,2),x=p[0],m=p[1],g=Object(n.useState)(""),v=Object(l.a)(g,2),w=v[0],k=v[1],C=Object(n.useState)(!1),F=Object(l.a)(C,2),D=F[0],N=F[1],A=Object(n.useState)(!1),E=Object(l.a)(A,2),M=E[0],z=E[1],B=Object(n.useState)({header:"",message:"",autohide:!0,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),q=Object(l.a)(B,2),H=q[0],I=q[1],P=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return a={firstname:o,lastname:O,email:x,password:w,admin:D},e.next=4,r(2,a);case 4:200!==(n=e.sent).code?I({header:"Error",message:n.message,closeParent:!1,autohide:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}):200===n.code&&I({header:"Sign up success",message:n.message,closeParent:!0,autohide:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}),T(),z(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){j(""),h(""),m(""),k(""),N(!1)};return t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(_.a,{onSubmit:function(e){e.preventDefault(),P(!0)},children:[Object(S.jsxs)(J.a.Body,{children:[Object(S.jsxs)(_.a.Group,{children:[Object(S.jsx)(_.a.Label,{children:"Firstname"}),Object(S.jsx)(_.a.Control,{type:"input",placeholder:"Etunimi",value:o,onChange:function(e){var t=e.target;return j(t.value)},required:!0})]}),Object(S.jsxs)(_.a.Group,{children:[Object(S.jsx)(_.a.Label,{children:"Surname"}),Object(S.jsx)(_.a.Control,{type:"input",placeholder:"Sukunimi",value:O,onChange:function(e){var t=e.target;return h(t.value)},required:!0})]}),Object(S.jsxs)(_.a.Group,{children:[Object(S.jsx)(_.a.Label,{children:"Email"}),Object(S.jsx)(_.a.Control,{type:"email",placeholder:"email",value:x,onChange:function(e){var t=e.target;return m(t.value)},required:!0})]}),Object(S.jsxs)(_.a.Group,{children:[Object(S.jsx)(_.a.Label,{children:"Password"}),Object(S.jsx)(_.a.Control,{type:"password",placeholder:"Salasana",value:w,onChange:function(e){var t=e.target;return k(t.value)},required:!0})]}),Object(S.jsx)(_.a.Group,{controlId:"formBasicCheckbox",children:Object(S.jsx)(_.a.Check,{type:"checkbox",label:"Admin",onChange:function(e){N(e.target.checked)}})})]}),Object(S.jsxs)(J.a.Footer,{children:[Object(S.jsx)(y.a,{variant:"secondary",onClick:function(){a(!1)},children:"Close"}),Object(S.jsx)(y.a,{type:"Submit",variant:"primary",children:"Ready"})]})]}),Object(S.jsx)(L,{show:M,close:function(){z(!1),H.closeParent&&a(!1)},params:H})]}):null},X=function(e){var t=e._show,a=e.showDialog,r=e.func,c=Object(n.useState)(""),s=Object(l.a)(c,2),o=s[0],j=s[1],d=Object(n.useState)(""),b=Object(l.a)(d,2),O=b[0],h=b[1],f=Object(n.useState)(!1),p=Object(l.a)(f,2),x=p[0],m=p[1],g=Object(n.useState)(!1),v=Object(l.a)(g,2),w=v[0],k=v[1],C=Object(n.useState)({title:"Log in",btnClose:"Close"}),F=Object(l.a)(C,2),D=F[0],N=F[1],A=Object(n.useState)(!1),E=Object(l.a)(A,2),M=E[0],z=E[1],B=Object(n.useState)({header:"",message:"",autohide:!1,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),q=Object(l.a)(B,2),H=q[0],I=q[1];Object(n.useEffect)((function(){N(D),m(t),t||k(!1)}),[t,D]);var P=function(){N({title:"Sign up",btnClose:"Close"})},T=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return n={email:o,password:O},e.next=4,r(1,n);case 4:null===(c=e.sent)||404===c.code||401===c.code?(s=null,u=!1,null===c?(u=!0,s="No connection to backend"):s=c.message,I({header:"Error",message:s,autohide:!0,delay:2e3,closeParent:u,style:{backgroundcolor:"#00FF00",color:"blue"}}),z(!0)):200===c.code&&(I({header:"Login succesfull",message:"Welcome ;)",autohide:!0,delay:2e3,closeParent:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}),z(!0)),e.next=9;break;case 8:a(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(J.a,{show:x,onHide:function(){},children:[Object(S.jsx)(J.a.Header,{closeButton:!0,onClick:function(){T(!1)},children:Object(S.jsx)(J.a.Title,{children:D.title})}),!w&&Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(_.a,{onSubmit:function(e){e.preventDefault(),T(!0)},children:[Object(S.jsxs)(J.a.Body,{children:[Object(S.jsxs)(_.a.Group,{controlId:"formBasicEmail",children:[Object(S.jsx)(_.a.Label,{children:"Email"}),Object(S.jsx)(_.a.Control,{type:"email",placeholder:"Enter email",value:o,onChange:function(e){var t=e.target;return j(t.value)},required:!0})]}),Object(S.jsxs)(_.a.Group,{controlId:"formBasicPassword",children:[Object(S.jsx)(_.a.Label,{children:"Password"}),Object(S.jsx)(_.a.Control,{type:"password",placeholder:"Password",value:O,onChange:function(e){var t=e.target;return h(t.value)},required:!0})]})]}),Object(S.jsx)(J.a.Footer,{children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,{variant:"warning",className:"mr-auto",onClick:function(){var e;e=!0,P(),k(e)},children:"New user"}),Object(S.jsx)(y.a,{variant:"secondary",onClick:function(){T(!1)},children:D.btnClose}),Object(S.jsx)(y.a,{type:"submit",variant:"primary",children:"Log in"})]})})]})}),Object(S.jsx)(V,{show:w,close:function(){N({title:"Login",btnClose:"Close"}),k(!1)},func:r}),Object(S.jsx)(L,{show:M,close:function(){z(!1),H.closeParent&&a(!1)},params:H})]})})},Z=function(e){var t=e.show,a=e.onHide,n=e.updateDb;return Object(S.jsxs)(J.a,{show:t,onHide:a,size:"sm","aria-labelledby":"contained-modal-title-vcenter",backdrop:"static",children:[Object(S.jsx)(J.a.Header,{closeButton:!0,children:Object(S.jsx)(J.a.Title,{id:"contained-modal-title-vcenter",children:"Update the database"})}),Object(S.jsxs)(J.a.Body,{children:[Object(S.jsx)("h5",{children:"Are you sure?"}),Object(S.jsx)("p",{})]}),Object(S.jsxs)(J.a.Footer,{children:[Object(S.jsx)(y.a,{variant:"secondary",onClick:a,children:"No"}),Object(S.jsx)(y.a,{variant:"primary",onClick:function(){a(!1),n(!0)},children:"Yes"})]})]})},$=(a(201),function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(l.a)(c,2),o=s[0],O=s[1],h=Object(n.useState)(""),f=Object(l.a)(h,2),m=f[0],g=f[1],v=Object(n.useState)(!1),y=Object(l.a)(v,2),w=y[0],k=y[1],C=Object(n.useState)(""),F=Object(l.a)(C,2),_=F[0],D=F[1],N=Object(n.useState)(!1),A=Object(l.a)(N,2),E=A[0],M=A[1],z=Object(n.useState)(!1),B=Object(l.a)(z,2),q=B[0],H=B[1],L=Object(n.useState)(!1),I=Object(l.a)(L,2),P=I[0],T=I[1],G=Object(b.g)(),R=function(){return{headers:{Authorization:"bearer ".concat(_)}}},U=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.updateDataToMongo(R());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=Object(d.a)("/");return e.on("onProgress",(function(e){console.log("message from backend onProgress "+e),H(e)})),e.on("connect",(function(e){console.log("socket connected")})),e.on("connected",(function(e){console.log("message from backend connected"+e)})),function(){e.disconnect()}}),[]),Object(n.useEffect)((function(){""!==o&&function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getDataFromMongo(R());case 2:t=e.sent,r(t);try{G("/MyActivities")}catch(a){alert(a.message)}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[_]);var Y=function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.register(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t){e.next=13;break}if(null===a){e.next=11;break}return e.next=4,p.login(a);case 4:if(null===(r=e.sent)){e.next=10;break}return 200===r.code&&(O(r.data.email),g(r.data.firstname),k(r.data.admin),D(r.data.token)),e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=17;break;case 13:if(2!==t){e.next=17;break}return e.next=16,Y(a);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("getActivitiesData"!==t){e.next=4;break}return e.abrupt("return",a);case 4:"updateDb"===t?Q():"login"===t?M(!0):"logout"===t&&g("");case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Q=function(){T(!0)},V=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t){e.next=3;break}return e.next=3,U();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(j.a,{fluid:!0,className:"App",children:[Object(S.jsxs)("div",{style:{backgroundColor:"#353b45"},children:[Object(S.jsx)(X,{_show:E,showDialog:M,func:J}),Object(S.jsx)(Z,{show:P,onHide:function(){return T(!1)},updateDb:V})]}),Object(S.jsx)(W,{user:m,admin:w,callBack:K,progress:q})]})});s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(m.a,{children:Object(S.jsx)($,{})})}),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.37082c84.chunk.js.map