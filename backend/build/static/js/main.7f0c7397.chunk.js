(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{124:function(e,t,a){},195:function(e,t,a){},198:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(34),s=a.n(c),o=(a(124),a(0)),i=a.n(o),l=a(5),u=a(2),j=a(213),d=(a(88),a(116)),b=a(21),O=a(58),h=a.n(O);a(110).config();var p="/api/user/";console.log(p);var f={login:function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/api/user/login",t);case 3:return a=e.sent,n={code:a.status,data:a.data},e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),void 0===(r=e.t0.response)){e.next=16;break}return c={code:r.status,message:r.data.error},e.abrupt("return",c);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,h.a.post("/api/user/register",t);case 5:return a=e.sent,n={code:a.status,message:a.data.message},e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(2),r=e.t0.response,c={code:r.status,message:r.data.error},e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()};a(110).config();var x={getDataFromMongo:function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/data/getactivities",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateDataToMongo:function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/data/getstravaactivities",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=a(49),m=a(220),v=a(214),y=a(222),w=a(217),k=a.p+"static/media/logo.596a690d.svg",S=a(6),_=function(){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{style:{paddingLeft:"10px",paddingTop:"10px"},children:[Object(S.jsx)("div",{style:{color:"white",fontSize:"30px"},children:"Py\xf6r\xe4ilyaktiviteettien data-analytiikka"}),Object(S.jsx)("h6",{style:{color:"#609CE1",marginTop:"8px"},children:"2022 \xa9AA4598"})]}),Object(S.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(S.jsx)("img",{src:k,width:"40%",style:{marginTop:"50px"},alt:""})})]})},C=a(26),F=a(219),D=a(209),A=a(210),N=a(211),M=a(100),B=a.n(M),E=(a(151),function(e){var t=e.mode,a=e.item,r=e.func,c=e._selectedIndex,s=Object(n.useState)(["Moving time","Distance","Average speed","Average heartrate"]),o=Object(u.a)(s,1)[0],i=Object(n.useState)(""),l=Object(u.a)(i,2),j=l[0],d=(l[1],Object(n.useState)(new Date)),b=Object(u.a)(d,2),O=b[0],h=b[1],p=Object(n.useState)(new Date),f=Object(u.a)(p,2),x=f[0],g=f[1],m=Object(n.useState)(o[0]),v=Object(u.a)(m,2),w=v[0],k=v[1],_=Object(n.useState)(0),C=Object(u.a)(_,2),M=C[0],E=C[1];Object(n.useEffect)((function(){E(null!==c&&0!==t?c:0)}),[c,t]);var L=function(e,t){r(e,t)};if(2===t){var q=[function(e){var t=new Date(e),a=(t.getMonth()+1).toString(),n=t.getDate().toString(),r=t.getFullYear().toString();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),a+"/"+n+"/"+r}(a.start_date),a.moving_time,a.distance,a.average_speed,a.average_heartrate],I={background:"#7AABFF"};return Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[q.map((function(e,t){return t===M+1?Object(S.jsx)("td",{style:I,children:e},t):Object(S.jsxs)("td",{children:[" ",e," "]},t)})),Object(S.jsxs)("td",{style:{textAlign:"right"},children:[Object(S.jsx)(y.a,{className:"btn btn-success btn-sm",id:a._id,onClick:function(e){L(3,e.target.id)},children:Object(S.jsx)(D.a,{id:a._id})}),Object(S.jsx)(y.a,{className:"btn btn-secondary btn-sm",style:{marginLeft:"5px"},id:a._id,onClick:function(e){L(1,e.target.id)},children:Object(S.jsx)(A.a,{id:a._id})})]})]})})}console.log("MODE= "+t);return Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)(B.a,{type:"date",className:"form-control",id:"dp",required:!0,selected:O,onChange:function(e){return h(e)}})}),Object(S.jsx)("td",{children:Object(S.jsx)(B.a,{type:"date",className:"form-control",id:"dp2",required:!0,selected:x,onChange:function(e){return g(e)}})}),Object(S.jsx)("td",{children:Object(S.jsx)(F.a.Control,{as:"select",id:"type",custom:!0,value:w,onChange:function(e){var t=e.target;E(t.selectedIndex),k(t.value)},children:o.map((function(e,t){return Object(S.jsxs)("option",{value:e,children:[" ",e]},t)}))})}),Object(S.jsx)("td",{children:Object(S.jsx)(y.a,{type:"submit",className:"float-right ml-5 btn btn-success",id:j,onClick:function(e){var a;a=e,e.target.id,""!==O&&""!==x&&(a.preventDefault(),0===t&&r(5,{startDate:O,endDate:x},M))},children:Object(S.jsx)(N.a,{id:j})})}),Object(S.jsx)("td",{})]})})}),L=a(212),q=(a(195),function(e){var t=e.mode,a=e.data,r=e.header,c=e.func,s=Object(n.useState)(0),o=Object(u.a)(s,2),i=o[0],l=o[1],j=function(e,t,a){c(e,t),l(a)},d=function(e){var t=e.header;return Object(S.jsx)("tbody",{children:Object(S.jsx)("tr",{children:t.map((function(e,t){return Object(S.jsx)("th",{style:{background:"#000000",color:"#00FFFF"},children:e},t)}))})})};return Object(S.jsx)(F.a,{className:"overflow-auto form",style:{maxHeight:"587px"},autoComplete:"off",children:Object(S.jsxs)(L.a,{className:"table table-sm table-primary",responsive:"sm",children:[a.length>0&&Object(S.jsx)(d,{header:r}),a.length>0&&a.map((function(e){return Object(S.jsx)(E,{mode:t,item:e,func:j,_selectedIndex:i},e.ride_id)}))]})})}),I=a(215),P=a(115),T=a(221),H=function(e){var t=e.show,a=e.close,n=e.params,r={backgroundColor:n.style.backgroundcolor,color:n.style.color,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return Object(S.jsxs)("div",{children:[n.autohide&&Object(S.jsxs)(T.a,{style:r,onClose:function(){return a()},show:t,delay:n.delay,autohide:!0,children:[Object(S.jsx)(T.a.Header,{style:{backgroundColor:"black",color:"white"},children:Object(S.jsx)("strong",{className:"mr-auto",children:n.header})}),Object(S.jsx)(T.a.Body,{children:n.message})]}),!n.autohide&&Object(S.jsxs)(T.a,{style:r,onClose:function(){return a()},show:t,children:[Object(S.jsx)(T.a.Header,{children:Object(S.jsx)("strong",{className:"mr-auto",children:n.header})}),Object(S.jsx)(T.a.Body,{children:n.message})]})]})},z=function(e){var t,a,r=e.df,c=e._years,s=Object(n.useState)("bar"),o=Object(u.a)(s,2),i=o[0],l=o[1],j=Object(n.useState)([]),d=Object(u.a)(j,2),b=d[0],O=d[1],h=Object(n.useState)([]),p=Object(u.a)(h,2),f=p[0],x=p[1],g=[];c.forEach((function(e){var n=r.loc({columns:["distance","start_date"]});t=Object(C.c)(n.start_date).year().eq(e),n=n.loc({rows:t}),a=n.distance.sum(),a=Math.round(a/1e3),g.push(a)})),Object(n.useEffect)((function(){x(c),O(g)}),[]);var m,v,y=new C.a({ride:b},{index:f});"bar"===i?(m={width:1e3,plot_bgcolor:"#133863",paper_bgcolor:"#133863",yaxis:{title:"km",color:"#00FF00"},xaxis:{title:"Year",color:"#00FF00"}},v={displayModeBar:!1,displaylogo:!1},y.plot("plot_div").bar({layout:m,config:v})):(m={title:{text:"",x:0},width:1e3,plot_bgcolor:"#133863",paper_bgcolor:"#133863",yaxis:{title:"km",color:"#00FF00"},xaxis:{title:"Year",color:"#00FF00"}},v={columns:["ride"],displayModeBar:!1,displaylogo:!1},y.plot("plot_div").line({layout:m,config:v}));return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{id:"plot_div"}),Object(S.jsx)("select",{className:"float-right mr-5 btn btn-success",value:i,onChange:function(e){var t=e.target;l(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})]})},G=a(12),Y=function(e){var t=e.df,a=e._years,r=Object(n.useState)("bar"),c=Object(u.a)(r,2),s=c[0],o=c[1],i=Object(n.useState)(a[0]),l=Object(u.a)(i,2),j=l[0],d=l[1],b=Object(n.useState)([]),O=Object(u.a)(b,2),h=(O[0],O[1],Object(n.useState)([])),p=Object(u.a)(h,2),f=p[0],x=p[1],g=Object(n.useState)(Object(G.a)(Array(12).keys()).map((function(e){return e+1}))),m=Object(u.a)(g,2),v=m[0],y=(m[1],t.loc({columns:["distance","start_date"]})),w=parseInt(j),k=Object(C.c)(y.start_date).year().eq(w);y=y.loc({rows:k});for(var _=[],F=0;F<12;F++){k=Object(C.c)(y.start_date).month().eq(F);var D=y.loc({rows:k}).distance.sum();D=Math.round(D/1e3),_.push(D)}if(Object(n.useEffect)((function(){x(a)}),[]),"line"===s){new C.a({ride:_},{index:v}).plot("plot_div").line({layout:{title:{text:"",x:0},width:1e3,yaxis:{title:"km",color:"#FFA500"},xaxis:{title:"Month",color:"#FFA500"},plot_bgcolor:"#133863",paper_bgcolor:"#133863"},config:{columns:["ride"],displayModeBar:!1,displaylogo:!1}})}else{new C.a({ride:_},{index:v}).plot("plot_div").bar({layout:{width:1e3,plot_bgcolor:"#133863",paper_bgcolor:"#133863",yaxis:{title:"km",color:"#FFA500"},xaxis:{title:"Month",color:"#FFA500"}},config:{displayModeBar:!1,displaylogo:!1}})}return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{id:"plot_div"}),Object(S.jsx)("select",{className:"float-right mr-5 btn btn-success",value:s,onChange:function(e){var t=e.target;o(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))}),Object(S.jsx)("select",{className:"float-right mr-1 btn btn-info",value:j,onChange:function(e){var t=e.target;d(t.value)},children:f.map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})]})},U=function(e){for(var t=e.df,a=e._years,r=Object(n.useState)("bar"),c=Object(u.a)(r,2),s=c[0],o=c[1],i=Object(n.useState)(a[0]),l=Object(u.a)(i,2),j=(l[0],l[1],Object(n.useState)([])),d=Object(u.a)(j,2),b=(d[0],d[1],Object(n.useState)([])),O=Object(u.a)(b,2),h=(O[0],O[1]),p=Object(n.useState)(Object(G.a)(Array(12).keys()).map((function(e){return e+1}))),f=Object(u.a)(p,2),x=f[0],g=(f[1],{}),m=0;m<a.length;m++){var v=t.loc({columns:["distance","start_date"]}),y=parseInt(a[m]),w=Object(C.c)(v.start_date).year().eq(y);v=v.loc({rows:w});for(var k=[],_=0;_<12;_++){w=Object(C.c)(v.start_date).month().eq(_);var F=v.loc({rows:w}).distance.sum();F=Math.round(F/1e3),k.push(F)}g[a[m]]=k}if(Object(n.useEffect)((function(){h(a)}),[]),"line"===s){new C.a(g,{index:x}).plot("plot_div").line({layout:{title:{text:"",x:0},legend:{bgcolor:"133863",font:{family:"Arial",size:12,color:"#14a2b8"}},width:1e3,yaxis:{title:"km",color:"#14a2b8"},xaxis:{title:"Month",color:"#14a2b8"},plot_bgcolor:"#133863",paper_bgcolor:"#133863"},config:{displayModeBar:!1,displaylogo:!1}})}else{new C.a(g,{index:x}).plot("plot_div").bar({layout:{width:1e3,plot_bgcolor:"#133863",paper_bgcolor:"#133863",legend:{bgcolor:"133863",font:{family:"Arial",size:12,color:"#14a2b8"}},yaxis:{title:"km",color:"#FFA500"},xaxis:{title:"Month",color:"#FFA500"}},config:{displayModeBar:!1,displaylogo:!1}})}return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{id:"plot_div"}),Object(S.jsx)("select",{className:"float-right mr-5 btn btn-success",value:s,onChange:function(e){var t=e.target;o(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})]})},J=function(e){var t=e.callBack,a=(e.user,Object(n.useState)()),r=Object(u.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(),d=Object(u.a)(o,2),b=d[0],O=d[1],h=Object(n.useState)(2),p=Object(u.a)(h,2),f=p[0],x=p[1],g=Object(n.useState)([]),w=Object(u.a)(g,2),_=w[0],F=w[1],D=Object(n.useState)(0),A=Object(u.a)(D,2),N=A[0],M=A[1],B=Object(n.useState)(!1),E=Object(u.a)(B,2),L=E[0],T=E[1],G=Object(n.useState)({header:"",message:"",autohide:!1,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),J=Object(u.a)(G,2),R=J[0];J[1];Object(n.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("getActivitiesData");case 2:return a=e.sent,n=new C.a(a),console.log(n),e.t0=O,e.next=8,Q(n);case 8:e.t1=e.sent,(0,e.t0)(e.t1),s(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var Q=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t.loc({columns:["start_date"]})).start_date=Object(C.c)(a.start_date).year(),a=a.loc({columns:["start_date"]}),n=new C.b(a.start_date.values),e.abrupt("return",n.unique().values);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(i.a.mark((function e(t,a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===t?(F([[]]),x(t)):5===t&&K(a);case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,r,s,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.startDate,n=t.endDate,a=new Date(a.setUTCHours(0,0,0,0)),n=new Date(n.setUTCHours(23,59,0,0)),a=a.toISOString(),n=n.toISOString(),r=c.loc({columns:["ride_id","start_date","moving_time","distance","average_speed","average_heartrate"]}),s=[],o=0;o<r.index.length;o++)(l=r.at(o,"start_date"))>=a&&l<=n&&(console.log(l),u=r.iloc({rows:[o]}).toJSON(),console.log("----------------------------------"),u[0].distance=u[0].distance/1e3,u[0].average_speed=(u[0].distance/u[0].moving_time*3600).toFixed(2),s.push(u[0]));F(s),x(2);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=["Start","End","Topic"];return 2===f&&(V=["Date","Moving time (s)","Distance (km)","Avg speed (km/h)","Avg hr (bpm)"]),Object(S.jsxs)(j.a,{children:[Object(S.jsxs)(m.a,{style:{background:"#000000"},variant:"dark",children:[Object(S.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(S.jsx)(v.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"outline-success",onClick:function(){M(1)},children:"Years"})}),Object(S.jsx)(v.a,{className:"ml-2",children:Object(S.jsx)(y.a,{variant:"outline-warning",onClick:function(){M(2)},children:"Months"})}),Object(S.jsx)(v.a,{className:"ml-2",children:Object(S.jsx)(y.a,{variant:"outline-info",onClick:function(){M(4)},children:"Summary"})}),Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{className:"ml-2",variant:"outline-primary",onClick:function(){W(0,null),M(3)},children:"Query"})})]}),Object(S.jsx)(I.a,{children:Object(S.jsx)(P.a,{children:Object(S.jsx)("h2",{children:" "})})}),0===N&&Object(S.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(S.jsx)("img",{src:k,width:"50%",style:{marginTop:"50px"},alt:""})}),1===N&&Object(S.jsx)(z,{df:c,_years:b}),2===N&&Object(S.jsx)(Y,{df:c,_years:b}),4===N&&Object(S.jsx)(U,{df:c,_years:b}),3===N&&Object(S.jsx)(q,{mode:f,data:_,header:V,func:W}),Object(S.jsx)("div",{id:"plot_div",style:{display:"none"}}),Object(S.jsx)(H,{show:L,close:function(){T(!1)},params:R})]})},R=a(218),Q=a(216),W=function(e){var t=e.show,a=e.message;return Object(S.jsx)(R.a,{show:t,size:"sm",backdrop:"static",keyboard:!1,centered:!0,children:Object(S.jsxs)(y.a,{variant:"primary",disabled:!0,children:[Object(S.jsx)(Q.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),Object(S.jsx)("span",{children:"\xa0\xa0\xa0"}),a]})})},K=function(e){var t=e.user,a=e.admin,r=e.callBack,c=e.progress,s=Object(n.useState)(!1),o=Object(u.a)(s,2),i=o[0],l=o[1],j=Object(b.f)().pathname;return Object(n.useEffect)((function(){l(c)}),[c]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(W,{show:i,message:"Loading..."}),Object(S.jsxs)(m.a,{style:{background:"#091834"},variant:"light",children:[Object(S.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(S.jsx)(g.b,{to:"/",className:"mr-auto",children:Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{variant:"success",children:Object(S.jsx)(w.a,{color:"white",size:22})})})}),t&&Object(S.jsxs)(S.Fragment,{children:["/"===j&&Object(S.jsx)(g.b,{to:"/MyActivities",className:"ml-auto",children:Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{variant:"outline-warning",children:"Activities"})})}),a&&"/"===j&&Object(S.jsx)(v.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"outline-danger",onClick:function(){r("updateDb")},children:"Update Db"})}),Object(S.jsx)("div",{className:"ml-auto",style:{paddingRight:"15px",color:"darkcyan"},children:"Logged in: "+t}),Object(S.jsx)(g.b,{to:"/",children:Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{variant:"dark",onClick:function(){r("logout")},children:"Log out"})})})]}),!t&&Object(S.jsx)(v.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"info",onClick:function(){r("login")},children:"Log in"})})]}),Object(S.jsxs)(b.d,{children:[Object(S.jsx)(b.b,{path:"/",element:Object(S.jsx)(_,{})}),Object(S.jsx)(b.b,{path:"/MyActivities",element:t?Object(S.jsx)(J,{callBack:r,user:t}):Object(S.jsx)(b.a,{to:"/",replace:!0})}),Object(S.jsx)(b.b,{path:"*",element:Object(S.jsx)(b.a,{to:"/"})})]})]})},V=function(e){var t=e.show,a=e.close,r=e.func,c=Object(n.useState)(""),s=Object(u.a)(c,2),o=s[0],j=s[1],d=Object(n.useState)(""),b=Object(u.a)(d,2),O=b[0],h=b[1],p=Object(n.useState)(""),f=Object(u.a)(p,2),x=f[0],g=f[1],m=Object(n.useState)(""),v=Object(u.a)(m,2),w=v[0],k=v[1],_=Object(n.useState)(!1),C=Object(u.a)(_,2),D=C[0],A=C[1],N=Object(n.useState)(!1),M=Object(u.a)(N,2),B=M[0],E=M[1],L=Object(n.useState)({header:"",message:"",autohide:!0,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),q=Object(u.a)(L,2),I=q[0],P=q[1],T=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return a={firstname:o,lastname:O,email:x,password:w,admin:D},e.next=4,r(2,a);case 4:200!==(n=e.sent).code?P({header:"Error",message:n.message,closeParent:!1,autohide:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}):200===n.code&&P({header:"Sign up success",message:n.message,closeParent:!0,autohide:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}),z(),E(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){j(""),h(""),g(""),k(""),A(!1)};return t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(F.a,{onSubmit:function(e){e.preventDefault(),T(!0)},children:[Object(S.jsxs)(R.a.Body,{children:[Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Firstname"}),Object(S.jsx)(F.a.Control,{type:"input",placeholder:"Etunimi",value:o,onChange:function(e){var t=e.target;return j(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Surname"}),Object(S.jsx)(F.a.Control,{type:"input",placeholder:"Sukunimi",value:O,onChange:function(e){var t=e.target;return h(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Email"}),Object(S.jsx)(F.a.Control,{type:"email",placeholder:"email",value:x,onChange:function(e){var t=e.target;return g(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Password"}),Object(S.jsx)(F.a.Control,{type:"password",placeholder:"Salasana",value:w,onChange:function(e){var t=e.target;return k(t.value)},required:!0})]}),Object(S.jsx)(F.a.Group,{controlId:"formBasicCheckbox",children:Object(S.jsx)(F.a.Check,{type:"checkbox",label:"Admin",onChange:function(e){A(e.target.checked)}})})]}),Object(S.jsxs)(R.a.Footer,{children:[Object(S.jsx)(y.a,{variant:"secondary",onClick:function(){a(!1)},children:"Close"}),Object(S.jsx)(y.a,{type:"Submit",variant:"primary",children:"Ready"})]})]}),Object(S.jsx)(H,{show:B,close:function(){E(!1),I.closeParent&&a(!1)},params:I})]}):null},X=function(e){var t=e._show,a=e.showDialog,r=e.func,c=Object(n.useState)(""),s=Object(u.a)(c,2),o=s[0],j=s[1],d=Object(n.useState)(""),b=Object(u.a)(d,2),O=b[0],h=b[1],p=Object(n.useState)(!1),f=Object(u.a)(p,2),x=f[0],g=f[1],m=Object(n.useState)(!1),v=Object(u.a)(m,2),w=v[0],k=v[1],_=Object(n.useState)({title:"Log in",btnClose:"Close"}),C=Object(u.a)(_,2),D=C[0],A=C[1],N=Object(n.useState)(!1),M=Object(u.a)(N,2),B=M[0],E=M[1],L=Object(n.useState)({header:"",message:"",autohide:!1,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),q=Object(u.a)(L,2),I=q[0],P=q[1];Object(n.useEffect)((function(){A(D),g(t),t||k(!1)}),[t,D]);var T=function(){A({title:"Sign up",btnClose:"Close"})},z=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return n={email:o,password:O},e.next=4,r(1,n);case 4:null===(c=e.sent)||404===c.code||401===c.code?(s=null,l=!1,null===c?(l=!0,s="No connection to backend"):s=c.message,P({header:"Error",message:s,autohide:!0,delay:2e3,closeParent:l,style:{backgroundcolor:"#00FF00",color:"blue"}}),E(!0)):200===c.code&&(P({header:"Login succesfull",message:"Welcome ;)",autohide:!0,delay:2e3,closeParent:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}),E(!0)),e.next=9;break;case 8:a(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(R.a,{show:x,onHide:function(){},children:[Object(S.jsx)(R.a.Header,{closeButton:!0,onClick:function(){z(!1)},children:Object(S.jsx)(R.a.Title,{children:D.title})}),!w&&Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(F.a,{onSubmit:function(e){e.preventDefault(),z(!0)},children:[Object(S.jsxs)(R.a.Body,{children:[Object(S.jsxs)(F.a.Group,{controlId:"formBasicEmail",children:[Object(S.jsx)(F.a.Label,{children:"Email"}),Object(S.jsx)(F.a.Control,{type:"email",placeholder:"Enter email",value:o,onChange:function(e){var t=e.target;return j(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{controlId:"formBasicPassword",children:[Object(S.jsx)(F.a.Label,{children:"Password"}),Object(S.jsx)(F.a.Control,{type:"password",placeholder:"Password",value:O,onChange:function(e){var t=e.target;return h(t.value)},required:!0})]})]}),Object(S.jsx)(R.a.Footer,{children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,{variant:"warning",className:"mr-auto",onClick:function(){var e;e=!0,T(),k(e)},children:"New user"}),Object(S.jsx)(y.a,{variant:"secondary",onClick:function(){z(!1)},children:D.btnClose}),Object(S.jsx)(y.a,{type:"submit",variant:"primary",children:"Log in"})]})})]})}),Object(S.jsx)(V,{show:w,close:function(){A({title:"Login",btnClose:"Close"}),k(!1)},func:r}),Object(S.jsx)(H,{show:B,close:function(){E(!1),I.closeParent&&a(!1)},params:I})]})})},Z=function(e){var t=e.show,a=e.onHide,n=e.updateDb;return Object(S.jsxs)(R.a,{show:t,onHide:a,size:"sm","aria-labelledby":"contained-modal-title-vcenter",backdrop:"static",children:[Object(S.jsx)(R.a.Header,{closeButton:!0,children:Object(S.jsx)(R.a.Title,{id:"contained-modal-title-vcenter",children:"Update the database"})}),Object(S.jsxs)(R.a.Body,{children:[Object(S.jsx)("h5",{children:"Are you sure?"}),Object(S.jsx)("p",{})]}),Object(S.jsxs)(R.a.Footer,{children:[Object(S.jsx)(y.a,{variant:"secondary",onClick:a,children:"No"}),Object(S.jsx)(y.a,{variant:"primary",onClick:function(){a(!1),n(!0)},children:"Yes"})]})]})},$=(a(198),function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(u.a)(c,2),o=s[0],O=s[1],h=Object(n.useState)(""),p=Object(u.a)(h,2),g=p[0],m=p[1],v=Object(n.useState)(!1),y=Object(u.a)(v,2),w=y[0],k=y[1],_=Object(n.useState)(""),C=Object(u.a)(_,2),F=C[0],D=C[1],A=Object(n.useState)(!1),N=Object(u.a)(A,2),M=N[0],B=N[1],E=Object(n.useState)(!1),L=Object(u.a)(E,2),q=L[0],I=L[1],P=Object(n.useState)(!1),T=Object(u.a)(P,2),H=T[0],z=T[1],G=Object(b.g)(),Y=function(){return{headers:{Authorization:"bearer ".concat(F)}}},U=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.updateDataToMongo(Y());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=Object(d.a)("/");return e.on("onProgress",(function(e){console.log("message from backend onProgress "+e),I(e)})),e.on("connect",(function(e){console.log("socket connected")})),e.on("connected",(function(e){console.log("message from backend connected"+e)})),function(){e.disconnect()}}),[]),Object(n.useEffect)((function(){""!==o&&function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getDataFromMongo(Y());case 2:t=e.sent,r(t);try{G("/MyActivities")}catch(a){alert(a.message)}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[F]);var J=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.register(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t){e.next=13;break}if(null===a){e.next=11;break}return e.next=4,f.login(a);case 4:if(null===(r=e.sent)){e.next=10;break}return 200===r.code&&(O(r.data.email),m(r.data.firstname),k(r.data.admin),D(r.data.token)),e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=17;break;case 13:if(2!==t){e.next=17;break}return e.next=16,J(a);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("getActivitiesData"!==t){e.next=4;break}return e.abrupt("return",a);case 4:"updateDb"===t?W():"login"===t?B(!0):"logout"===t&&m("");case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){z(!0)},V=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t){e.next=3;break}return e.next=3,U();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(j.a,{fluid:!0,className:"App",children:[Object(S.jsxs)("div",{style:{backgroundColor:"#353b45"},children:[Object(S.jsx)(X,{_show:M,showDialog:B,func:R}),Object(S.jsx)(Z,{show:H,onHide:function(){return z(!1)},updateDb:V})]}),Object(S.jsx)(K,{user:g,admin:w,callBack:Q,progress:q})]})});s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(g.a,{children:Object(S.jsx)($,{})})}),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.7f0c7397.chunk.js.map