(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{124:function(e,t,a){},195:function(e,t,a){},198:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(35),s=a.n(c),o=(a(124),a(0)),i=a.n(o),l=a(5),u=a(2),d=a(211),j=(a(88),a(116)),b=a(21),O=a(58),h=a.n(O);a(110).config();var p="/api/user/";console.log(p);var f={login:function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("/api/user/login",t);case 3:return a=e.sent,n={code:a.status,data:a.data},e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),void 0===(r=e.t0.response)){e.next=16;break}return c={code:r.status,message:r.data.error},e.abrupt("return",c);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,h.a.post("/api/user/register",t);case 5:return a=e.sent,n={code:a.status,message:a.data.message},e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(2),r=e.t0.response,c={code:r.status,message:r.data.error},e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()};a(110).config();var x={getDataFromMongo:function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/data/getactivities",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateDataToMongo:function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/data/getstravaactivities",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=a(49),g=a(218),v=a(212),y=a(220),w=a(215),k=a.p+"static/media/logo.596a690d.svg",S=a(6),C=function(){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{style:{paddingLeft:"10px",paddingTop:"10px"},children:[Object(S.jsx)("div",{style:{color:"white",fontSize:"30px"},children:"Py\xf6r\xe4ilyaktiviteettien data-analytiikka"}),Object(S.jsx)("h6",{style:{color:"#609CE1",marginTop:"8px"},children:"2022 \xa9AA4598"})]}),Object(S.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(S.jsx)("img",{src:k,width:"40%",style:{marginTop:"50px"},alt:""})})]})},_=a(26),F=a(217),D=a(209),A=a(100),N=a.n(A),M=(a(151),function(e){var t=e.mode,a=e.item,r=e.func,c=e._selectedIndex,s=Object(n.useState)(["Moving time","Distance","Average speed","Average heartrate"]),o=Object(u.a)(s,1)[0],i=Object(n.useState)(""),l=Object(u.a)(i,2),d=l[0],j=(l[1],Object(n.useState)(new Date)),b=Object(u.a)(j,2),O=b[0],h=b[1],p=Object(n.useState)(new Date),f=Object(u.a)(p,2),x=f[0],m=f[1],g=Object(n.useState)(o[0]),v=Object(u.a)(g,2),w=v[0],k=v[1],C=Object(n.useState)(0),_=Object(u.a)(C,2),A=_[0],M=_[1];Object(n.useEffect)((function(){M(null!==c&&0!==t?c:0)}),[c,t]);if(2===t){var B=[function(e){var t=new Date(e),a=(t.getMonth()+1).toString(),n=t.getDate().toString(),r=t.getFullYear().toString();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),a+"/"+n+"/"+r}(a.start_date),a.moving_time,a.distance,a.average_speed,a.average_heartrate],E={background:"#7AABFF"};return Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[B.map((function(e,t){return t===A+1?Object(S.jsx)("td",{style:E,children:e},t):Object(S.jsxs)("td",{children:[" ",e," "]},t)})),Object(S.jsx)("td",{style:{textAlign:"right"}})]})})}return Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)(N.a,{type:"date",className:"form-control",id:"dp",required:!0,selected:O,onChange:function(e){return h(e)}})}),Object(S.jsx)("td",{children:Object(S.jsx)(N.a,{type:"date",className:"form-control",id:"dp2",required:!0,selected:x,onChange:function(e){return m(e)}})}),Object(S.jsx)("td",{children:Object(S.jsx)(F.a.Control,{as:"select",id:"type",custom:!0,value:w,onChange:function(e){var t=e.target;M(t.selectedIndex),k(t.value)},children:o.map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})}),Object(S.jsx)("td",{children:Object(S.jsx)(y.a,{type:"submit",className:"float-right btn btn-success",id:d,onClick:function(e){var a;a=e,e.target.id,""!==O&&""!==x&&(a.preventDefault(),0===t&&r(5,{startDate:O,endDate:x},A))},children:Object(S.jsx)(D.a,{id:d})})}),Object(S.jsx)("td",{})]})})}),B=a(210),E=(a(195),function(e){var t=e.mode,a=e.data,r=e.header,c=e.func,s=Object(n.useState)(0),o=Object(u.a)(s,2),i=o[0],l=o[1],d=function(e,t,a){c(e,t),l(a)},j=function(e){var t=e.header;return Object(S.jsx)("tbody",{children:Object(S.jsx)("tr",{children:t.map((function(e,t){return Object(S.jsx)("td",{style:{background:"#091834",color:"#79abff"},children:e},t)}))})})};return Object(S.jsx)(F.a,{className:"overflow-auto form",style:{maxHeight:"587px"},autoComplete:"off",children:Object(S.jsxs)(B.a,{className:"table table-sm table-primary",responsive:"sm",children:[a.length>0&&Object(S.jsx)(j,{header:r}),a.length>0&&a.map((function(e){return Object(S.jsx)(M,{mode:t,item:e,func:d,_selectedIndex:i},e.ride_id)}))]})})}),q=a(213),L=a(115),I=a(219),P=function(e){var t=e.show,a=e.close,n=e.params,r={backgroundColor:n.style.backgroundcolor,color:n.style.color,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return Object(S.jsxs)("div",{children:[n.autohide&&Object(S.jsxs)(I.a,{style:r,onClose:function(){return a()},show:t,delay:n.delay,autohide:!0,children:[Object(S.jsx)(I.a.Header,{style:{backgroundColor:"black",color:"white"},children:Object(S.jsx)("strong",{className:"mr-auto",children:n.header})}),Object(S.jsx)(I.a.Body,{children:n.message})]}),!n.autohide&&Object(S.jsxs)(I.a,{style:r,onClose:function(){return a()},show:t,children:[Object(S.jsx)(I.a.Header,{children:Object(S.jsx)("strong",{className:"mr-auto",children:n.header})}),Object(S.jsx)(I.a.Body,{children:n.message})]})]})},T=function(e){var t,a,r=e.df,c=e._years,s=Object(n.useState)("bar"),o=Object(u.a)(s,2),i=o[0],l=o[1],d=Object(n.useState)([]),j=Object(u.a)(d,2),b=j[0],O=j[1],h=Object(n.useState)([]),p=Object(u.a)(h,2),f=p[0],x=p[1],m=[];c.forEach((function(e){var n=r.loc({columns:["distance","start_date"]});t=Object(_.c)(n.start_date).year().eq(e),n=n.loc({rows:t}),a=n.distance.sum(),a=Math.round(a/1e3),m.push(a)})),Object(n.useEffect)((function(){x(c),O(m)}),[]);var g,v,y=new _.a({ride:b},{index:f});"bar"===i?(g={width:1e3,plot_bgcolor:"#133863",paper_bgcolor:"#133863",yaxis:{title:"km",color:"#00FF00"},xaxis:{title:"Year",color:"#00FF00"}},v={displayModeBar:!1,displaylogo:!1},y.plot("plot_div").bar({layout:g,config:v})):(g={title:{text:"",x:0},width:1e3,plot_bgcolor:"#133863",paper_bgcolor:"#133863",yaxis:{title:"km",color:"#00FF00"},xaxis:{title:"Year",color:"#00FF00"}},v={columns:["ride"],displayModeBar:!1,displaylogo:!1},y.plot("plot_div").line({layout:g,config:v}));return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{id:"plot_div"}),Object(S.jsx)(F.a.Control,{className:"float-right mr-5 btn",style:{width:"auto"},as:"select",id:"type",custom:!0,value:i,onChange:function(e){var t=e.target;l(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})]})},H=a(12),z=function(e){var t=e.df,a=e._years,r=Object(n.useState)("bar"),c=Object(u.a)(r,2),s=c[0],o=c[1],i=Object(n.useState)(a[0]),l=Object(u.a)(i,2),d=l[0],j=l[1],b=Object(n.useState)([]),O=Object(u.a)(b,2),h=(O[0],O[1],Object(n.useState)([])),p=Object(u.a)(h,2),f=p[0],x=p[1],m=Object(n.useState)(Object(H.a)(Array(12).keys()).map((function(e){return e+1}))),g=Object(u.a)(m,2),v=g[0],y=(g[1],t.loc({columns:["distance","start_date"]})),w=parseInt(d),k=Object(_.c)(y.start_date).year().eq(w);y=y.loc({rows:k});for(var C=[],D=0;D<12;D++){k=Object(_.c)(y.start_date).month().eq(D);var A=y.loc({rows:k}).distance.sum();A=Math.round(A/1e3),C.push(A)}if(Object(n.useEffect)((function(){x(a)}),[]),"line"===s){new _.a({ride:C},{index:v}).plot("plot_div").line({layout:{title:{text:"",x:0},width:1e3,yaxis:{title:"km",color:"#FFA500"},xaxis:{title:"Month",color:"#FFA500"},plot_bgcolor:"#133863",paper_bgcolor:"#133863"},config:{columns:["ride"],displayModeBar:!1,displaylogo:!1}})}else{new _.a({ride:C},{index:v}).plot("plot_div").bar({layout:{width:1e3,plot_bgcolor:"#133863",paper_bgcolor:"#133863",yaxis:{title:"km",color:"#FFA500"},xaxis:{title:"Month",color:"#FFA500"}},config:{displayModeBar:!1,displaylogo:!1}})}return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{id:"plot_div"}),Object(S.jsx)(F.a.Control,{className:"float-right mr-5 btn",style:{width:"auto"},as:"select",id:"type",custom:!0,value:s,onChange:function(e){var t=e.target;o(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))}),Object(S.jsx)(F.a.Control,{className:"float-right mr-1 btn",style:{width:"auto"},as:"select",id:"type",custom:!0,value:d,onChange:function(e){var t=e.target;j(t.value)},children:f.map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})]})},G=function(e){for(var t=e.df,a=e._years,r=Object(n.useState)("bar"),c=Object(u.a)(r,2),s=c[0],o=c[1],i=Object(n.useState)(a[0]),l=Object(u.a)(i,2),d=(l[0],l[1],Object(n.useState)([])),j=Object(u.a)(d,2),b=(j[0],j[1],Object(n.useState)([])),O=Object(u.a)(b,2),h=(O[0],O[1]),p=Object(n.useState)(Object(H.a)(Array(12).keys()).map((function(e){return e+1}))),f=Object(u.a)(p,2),x=f[0],m=(f[1],{}),g=0;g<a.length;g++){var v=t.loc({columns:["distance","start_date"]}),y=parseInt(a[g]),w=Object(_.c)(v.start_date).year().eq(y);v=v.loc({rows:w});for(var k=[],C=0;C<12;C++){w=Object(_.c)(v.start_date).month().eq(C);var D=v.loc({rows:w}).distance.sum();D=Math.round(D/1e3),k.push(D)}m[a[g]]=k}if(Object(n.useEffect)((function(){h(a)}),[]),"line"===s){new _.a(m,{index:x}).plot("plot_div").line({layout:{title:{text:"",x:0},legend:{bgcolor:"133863",font:{family:"Arial",size:12,color:"#14a2b8"}},width:1e3,yaxis:{title:"km",color:"#14a2b8"},xaxis:{title:"Month",color:"#14a2b8"},plot_bgcolor:"#133863",paper_bgcolor:"#133863"},config:{displayModeBar:!1,displaylogo:!1}})}else{new _.a(m,{index:x}).plot("plot_div").bar({layout:{width:1e3,plot_bgcolor:"#133863",paper_bgcolor:"#133863",legend:{bgcolor:"133863",font:{family:"Arial",size:12,color:"#14a2b8"}},yaxis:{title:"km",color:"#FFA500"},xaxis:{title:"Month",color:"#FFA500"}},config:{displayModeBar:!1,displaylogo:!1}})}return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{id:"plot_div"}),Object(S.jsx)(F.a.Control,{className:"float-right mr-5 btn",style:{width:"auto"},as:"select",id:"type",custom:!0,value:s,onChange:function(e){var t=e.target;o(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})]})},U=function(e){var t=e.callBack,a=(e.user,Object(n.useState)()),r=Object(u.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(),j=Object(u.a)(o,2),b=j[0],O=j[1],h=Object(n.useState)(2),p=Object(u.a)(h,2),f=p[0],x=p[1],m=Object(n.useState)(["Distance"]),w=Object(u.a)(m,2),C=w[0],D=(w[1],Object(n.useState)(["Distance"])),A=Object(u.a)(D,2),N=A[0],M=A[1],B=Object(n.useState)([]),I=Object(u.a)(B,2),H=I[0],U=I[1],Y=Object(n.useState)(0),J=Object(u.a)(Y,2),R=J[0],Q=J[1],W=Object(n.useState)(!1),K=Object(u.a)(W,2),V=K[0],X=K[1],Z=Object(n.useState)({header:"",message:"",autohide:!1,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),$=Object(u.a)(Z,2),ee=$[0];$[1];Object(n.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("getActivitiesData");case 2:return a=e.sent,n=new _.a(a),console.log(n),e.t0=O,e.next=8,te(n);case 8:e.t1=e.sent,(0,e.t0)(e.t1),s(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var te=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t.loc({columns:["start_date"]})).start_date=Object(_.c)(a.start_date).year(),a=a.loc({columns:["start_date"]}),n=new _.b(a.start_date.values),e.abrupt("return",n.unique().values);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(i.a.mark((function e(t,a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===t?(U([[]]),x(t)):5===t&&ne(a);case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,r,s,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.startDate,n=t.endDate,a=new Date(a.setUTCHours(0,0,0,0)),n=new Date(n.setUTCHours(23,59,0,0)),a=a.toISOString(),n=n.toISOString(),r=c.loc({columns:["ride_id","start_date","moving_time","distance","average_speed","average_heartrate"]}),s=[],o=0;o<r.index.length;o++)(l=r.at(o,"start_date"))>=a&&l<=n&&(console.log(l),u=r.iloc({rows:[o]}).toJSON(),console.log("----------------------------------"),u[0].distance=u[0].distance/1e3,u[0].average_speed=(u[0].distance/u[0].moving_time*3600).toFixed(2),s.push(u[0]));U(s),x(2);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=["Start","End","Topic"," ",""];return 2===f&&(re=["Date","Moving time (s)","Distance (km)","Avg speed (km/h)","Avg hr (bpm)"," "]),Object(S.jsxs)(d.a,{children:[Object(S.jsxs)(g.a,{style:{background:"#000000"},variant:"dark",children:[Object(S.jsx)(g.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(S.jsx)(v.a,{className:"float-left",children:Object(S.jsx)(F.a.Control,{className:"mr-1 btn btn-info",style:{width:"auto",background:"#000000",color:"#00FFFF",borderStyle:"none",fontSize:"20px"},as:"select",id:"type",custom:!0,value:N,onChange:function(e){var t=e.target;M(t.value)},children:C.map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})}),Object(S.jsx)(v.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"outline-success",onClick:function(){Q(1)},children:"Years"})}),Object(S.jsx)(v.a,{className:"ml-2",children:Object(S.jsx)(y.a,{variant:"outline-success",onClick:function(){Q(2)},children:"Months"})}),Object(S.jsx)(v.a,{className:"ml-2",children:Object(S.jsx)(y.a,{variant:"outline-info",onClick:function(){Q(4)},children:"Summary"})}),Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{className:"ml-2",variant:"outline-primary",onClick:function(){ae(0,null),Q(3)},children:"Query"})})]}),Object(S.jsx)(q.a,{children:Object(S.jsx)(L.a,{children:Object(S.jsx)("h2",{children:" "})})}),0===R&&Object(S.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(S.jsx)("img",{src:k,width:"50%",style:{marginTop:"50px"},alt:""})}),1===R&&Object(S.jsx)(T,{df:c,_years:b}),2===R&&Object(S.jsx)(z,{df:c,_years:b}),4===R&&Object(S.jsx)(G,{df:c,_years:b}),3===R&&Object(S.jsx)(E,{mode:f,data:H,header:re,func:ae}),Object(S.jsx)("div",{id:"plot_div",style:{display:"none"}}),Object(S.jsx)(P,{show:V,close:function(){X(!1)},params:ee})]})},Y=a(216),J=a(214),R=function(e){var t=e.show,a=e.message;return Object(S.jsx)(Y.a,{show:t,size:"sm",backdrop:"static",keyboard:!1,centered:!0,children:Object(S.jsxs)(y.a,{variant:"primary",disabled:!0,children:[Object(S.jsx)(J.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),Object(S.jsx)("span",{children:"\xa0\xa0\xa0"}),a]})})},Q=function(e){var t=e.user,a=e.admin,r=e.callBack,c=e.progress,s=Object(n.useState)(!1),o=Object(u.a)(s,2),i=o[0],l=o[1],d=Object(b.f)().pathname;return Object(n.useEffect)((function(){l(c)}),[c]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(R,{show:i,message:"Updating db..."}),Object(S.jsxs)(g.a,{style:{background:"#091834"},variant:"light",children:[Object(S.jsx)(g.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(S.jsx)(m.b,{to:"/",className:"mr-auto",children:Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{variant:"success",children:Object(S.jsx)(w.a,{color:"white",size:22})})})}),t&&Object(S.jsxs)(S.Fragment,{children:["/"===d&&Object(S.jsx)(m.b,{to:"/MyActivities",className:"ml-auto",children:Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{variant:"outline-warning",children:"Activities"})})}),a&&"/"===d&&Object(S.jsx)(v.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"outline-danger",onClick:function(){r("updateDb")},children:"Update Db"})}),Object(S.jsx)("div",{className:"ml-auto",style:{paddingRight:"15px",color:"darkcyan"},children:"Logged in: "+t}),Object(S.jsx)(m.b,{to:"/",children:Object(S.jsx)(v.a,{children:Object(S.jsx)(y.a,{variant:"dark",onClick:function(){r("logout")},children:"Log out"})})})]}),!t&&Object(S.jsx)(v.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"info",onClick:function(){r("login")},children:"Log in"})})]}),Object(S.jsxs)(b.d,{children:[Object(S.jsx)(b.b,{path:"/",element:Object(S.jsx)(C,{})}),Object(S.jsx)(b.b,{path:"/MyActivities",element:t?Object(S.jsx)(U,{callBack:r,user:t}):Object(S.jsx)(b.a,{to:"/",replace:!0})}),Object(S.jsx)(b.b,{path:"*",element:Object(S.jsx)(b.a,{to:"/"})})]})]})},W=function(e){var t=e.show,a=e.close,r=e.func,c=Object(n.useState)(""),s=Object(u.a)(c,2),o=s[0],d=s[1],j=Object(n.useState)(""),b=Object(u.a)(j,2),O=b[0],h=b[1],p=Object(n.useState)(""),f=Object(u.a)(p,2),x=f[0],m=f[1],g=Object(n.useState)(""),v=Object(u.a)(g,2),w=v[0],k=v[1],C=Object(n.useState)(!1),_=Object(u.a)(C,2),D=_[0],A=_[1],N=Object(n.useState)(!1),M=Object(u.a)(N,2),B=M[0],E=M[1],q=Object(n.useState)({header:"",message:"",autohide:!0,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),L=Object(u.a)(q,2),I=L[0],T=L[1],H=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return a={firstname:o,lastname:O,email:x,password:w,admin:D},e.next=4,r(2,a);case 4:200!==(n=e.sent).code?T({header:"Error",message:n.message,closeParent:!1,autohide:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}):200===n.code&&T({header:"Sign up success",message:n.message,closeParent:!0,autohide:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}),z(),E(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){d(""),h(""),m(""),k(""),A(!1)};return t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(F.a,{onSubmit:function(e){e.preventDefault(),H(!0)},children:[Object(S.jsxs)(Y.a.Body,{children:[Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Firstname"}),Object(S.jsx)(F.a.Control,{type:"input",placeholder:"Etunimi",value:o,onChange:function(e){var t=e.target;return d(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Surname"}),Object(S.jsx)(F.a.Control,{type:"input",placeholder:"Sukunimi",value:O,onChange:function(e){var t=e.target;return h(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Email"}),Object(S.jsx)(F.a.Control,{type:"email",placeholder:"email",value:x,onChange:function(e){var t=e.target;return m(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Password"}),Object(S.jsx)(F.a.Control,{type:"password",placeholder:"Salasana",value:w,onChange:function(e){var t=e.target;return k(t.value)},required:!0})]}),Object(S.jsx)(F.a.Group,{controlId:"formBasicCheckbox",children:Object(S.jsx)(F.a.Check,{type:"checkbox",label:"Admin",onChange:function(e){A(e.target.checked)}})})]}),Object(S.jsxs)(Y.a.Footer,{children:[Object(S.jsx)(y.a,{variant:"secondary",onClick:function(){a(!1)},children:"Close"}),Object(S.jsx)(y.a,{type:"Submit",variant:"primary",children:"Ready"})]})]}),Object(S.jsx)(P,{show:B,close:function(){E(!1),I.closeParent&&a(!1)},params:I})]}):null},K=function(e){var t=e._show,a=e.showDialog,r=e.func,c=Object(n.useState)(""),s=Object(u.a)(c,2),o=s[0],d=s[1],j=Object(n.useState)(""),b=Object(u.a)(j,2),O=b[0],h=b[1],p=Object(n.useState)(!1),f=Object(u.a)(p,2),x=f[0],m=f[1],g=Object(n.useState)(!1),v=Object(u.a)(g,2),w=v[0],k=v[1],C=Object(n.useState)({title:"Log in",btnClose:"Close"}),_=Object(u.a)(C,2),D=_[0],A=_[1],N=Object(n.useState)(!1),M=Object(u.a)(N,2),B=M[0],E=M[1],q=Object(n.useState)({header:"",message:"",autohide:!1,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),L=Object(u.a)(q,2),I=L[0],T=L[1];Object(n.useEffect)((function(){A(D),m(t),t||k(!1)}),[t,D]);var H=function(){A({title:"Sign up",btnClose:"Close"})},z=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return n={email:o,password:O},e.next=4,r(1,n);case 4:null===(c=e.sent)||404===c.code||401===c.code?(s=null,l=!1,null===c?(l=!0,s="No connection to backend"):s=c.message,T({header:"Error",message:s,autohide:!0,delay:2e3,closeParent:l,style:{backgroundcolor:"#00FF00",color:"blue"}}),E(!0)):200===c.code&&(T({header:"Login succesfull",message:"Welcome ;)",autohide:!0,delay:2e3,closeParent:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}),E(!0)),e.next=9;break;case 8:a(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(Y.a,{show:x,onHide:function(){},children:[Object(S.jsx)(Y.a.Header,{closeButton:!0,onClick:function(){z(!1)},children:Object(S.jsx)(Y.a.Title,{children:D.title})}),!w&&Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(F.a,{onSubmit:function(e){e.preventDefault(),z(!0)},children:[Object(S.jsxs)(Y.a.Body,{children:[Object(S.jsxs)(F.a.Group,{controlId:"formBasicEmail",children:[Object(S.jsx)(F.a.Label,{children:"Email"}),Object(S.jsx)(F.a.Control,{type:"email",placeholder:"Enter email",value:o,onChange:function(e){var t=e.target;return d(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{controlId:"formBasicPassword",children:[Object(S.jsx)(F.a.Label,{children:"Password"}),Object(S.jsx)(F.a.Control,{type:"password",placeholder:"Password",value:O,onChange:function(e){var t=e.target;return h(t.value)},required:!0})]})]}),Object(S.jsx)(Y.a.Footer,{children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,{variant:"warning",className:"mr-auto",onClick:function(){var e;e=!0,H(),k(e)},children:"New user"}),Object(S.jsx)(y.a,{variant:"secondary",onClick:function(){z(!1)},children:D.btnClose}),Object(S.jsx)(y.a,{type:"submit",variant:"primary",children:"Log in"})]})})]})}),Object(S.jsx)(W,{show:w,close:function(){A({title:"Login",btnClose:"Close"}),k(!1)},func:r}),Object(S.jsx)(P,{show:B,close:function(){E(!1),I.closeParent&&a(!1)},params:I})]})})},V=function(e){var t=e.show,a=e.onHide,n=e.updateDb;return Object(S.jsxs)(Y.a,{show:t,onHide:a,size:"sm","aria-labelledby":"contained-modal-title-vcenter",backdrop:"static",children:[Object(S.jsx)(Y.a.Header,{closeButton:!0,children:Object(S.jsx)(Y.a.Title,{id:"contained-modal-title-vcenter",children:"Update the database"})}),Object(S.jsxs)(Y.a.Body,{children:[Object(S.jsx)("h5",{children:"Are you sure?"}),Object(S.jsx)("p",{})]}),Object(S.jsxs)(Y.a.Footer,{children:[Object(S.jsx)(y.a,{variant:"secondary",onClick:a,children:"No"}),Object(S.jsx)(y.a,{variant:"primary",onClick:function(){a(!1),n(!0)},children:"Yes"})]})]})},X=(a(198),function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(u.a)(c,2),o=s[0],O=s[1],h=Object(n.useState)(""),p=Object(u.a)(h,2),m=p[0],g=p[1],v=Object(n.useState)(!1),y=Object(u.a)(v,2),w=y[0],k=y[1],C=Object(n.useState)(""),_=Object(u.a)(C,2),F=_[0],D=_[1],A=Object(n.useState)(!1),N=Object(u.a)(A,2),M=N[0],B=N[1],E=Object(n.useState)(!1),q=Object(u.a)(E,2),L=q[0],I=q[1],P=Object(n.useState)(!1),T=Object(u.a)(P,2),H=T[0],z=T[1],G=Object(b.g)(),U=function(){return{headers:{Authorization:"bearer ".concat(F)}}},Y=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.updateDataToMongo(U());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=Object(j.a)("/");return e.on("onProgress",(function(e){console.log("message from backend onProgress "+e),I(e)})),e.on("connect",(function(e){console.log("socket connected")})),e.on("connected",(function(e){console.log("message from backend connected"+e)})),function(){e.disconnect()}}),[]),Object(n.useEffect)((function(){""!==o&&function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getDataFromMongo(U());case 2:t=e.sent,r(t);try{G("/MyActivities")}catch(a){alert(a.message)}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[F]);var J=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.register(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(l.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t){e.next=13;break}if(null===a){e.next=11;break}return e.next=4,f.login(a);case 4:if(null===(r=e.sent)){e.next=10;break}return 200===r.code&&(O(r.data.email),g(r.data.firstname),k(r.data.admin),D(r.data.token)),e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=17;break;case 13:if(2!==t){e.next=17;break}return e.next=16,J(a);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("getActivitiesData"!==t){e.next=4;break}return e.abrupt("return",a);case 4:"updateDb"===t?X():"login"===t?B(!0):"logout"===t&&g("");case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){z(!0)},Z=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t){e.next=3;break}return e.next=3,Y();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(d.a,{fluid:!0,className:"App",children:[Object(S.jsxs)("div",{style:{backgroundColor:"#353b45"},children:[Object(S.jsx)(K,{_show:M,showDialog:B,func:R}),Object(S.jsx)(V,{show:H,onHide:function(){return z(!1)},updateDb:Z})]}),Object(S.jsx)(Q,{user:m,admin:w,callBack:W,progress:L})]})});s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(m.a,{children:Object(S.jsx)(X,{})})}),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.2e257921.chunk.js.map