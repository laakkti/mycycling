(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{124:function(e,t,a){},195:function(e,t,a){},198:function(e,t,a){},200:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(34),s=a.n(c),i=(a(124),a(0)),o=a.n(i),u=a(5),l=a(3),d=a(214),j=(a(88),a(116)),b=a(21),h=a(58),O=a.n(h);a(110).config();var p="/api/user/";console.log(p);var f={login:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/api/user/login",t);case 3:return a=e.sent,n={code:a.status,data:a.data},e.abrupt("return",n);case 8:if(e.prev=8,e.t0=e.catch(0),void 0===(r=e.t0.response)){e.next=16;break}return c={code:r.status,message:r.data.error},e.abrupt("return",c);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,O.a.post("/api/user/register",t);case 5:return a=e.sent,n={code:a.status,message:a.data.message},e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(2),r=e.t0.response,c={code:r.status,message:r.data.error},e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()};a(110).config();var x={getDataFromMongo:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/api/data/getactivities",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateDataToMongo:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/api/data/getstravaactivities",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=a(49),v=a(221),g=a(215),y=a(223),k=a(217),w=a.p+"static/media/logo.596a690d.svg",S=a(6),C=function(){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{style:{paddingLeft:"10px",paddingTop:"10px"},children:[Object(S.jsx)("div",{style:{color:"white",fontSize:"30px"},children:"Py\xf6r\xe4ilyaktiviteettien data-analytiikka"}),Object(S.jsx)("h6",{style:{color:"#609CE1"},children:"2022 \xa9AA4598"})]}),Object(S.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:Object(S.jsx)("img",{src:w,width:"40%",style:{marginTop:"50px"},alt:""})})]})},_=a(32),F=a(220),D=a(209),B=a(210),A=a(211),N=a(212),E=a(100),M=a.n(E),q=(a(151),function(e){var t=e.mode,a=e.item,r=e.func,c=Object(n.useState)(["Distance","Moving time","Average speed","Average heartrate"]),s=Object(l.a)(c,1)[0],i=Object(n.useState)(""),o=Object(l.a)(i,2),u=o[0],d=(o[1],Object(n.useState)(new Date)),j=Object(l.a)(d,2),b=j[0],h=j[1],O=Object(n.useState)(new Date),p=Object(l.a)(O,2),f=p[0],x=p[1],m=Object(n.useState)(s[0]),v=Object(l.a)(m,2),g=v[0],k=v[1];Object(n.useEffect)((function(){}),[]);var w=function(e,t){r(e,t)};if(2===t){var C=[function(e){var t=new Date(e),a=(t.getMonth()+1).toString(),n=t.getDate().toString(),r=t.getFullYear().toString();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),a+"/"+n+"/"+r}(a.start_date),a.moving_time,a.distance,a.average_speed,a.average_heartrate];return Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[C.map((function(e,t){return Object(S.jsxs)("td",{children:[" ",e," "]},t)})),Object(S.jsxs)("td",{style:{textAlign:"right"},children:[Object(S.jsx)(y.a,{className:"btn btn-success btn-sm",id:a._id,onClick:function(e){w(3,e.target.id)},children:Object(S.jsx)(D.a,{id:a._id})}),Object(S.jsx)(y.a,{className:"btn btn-secondary btn-sm",style:{marginLeft:"5px"},id:a._id,onClick:function(e){w(1,e.target.id)},children:Object(S.jsx)(B.a,{id:a._id})})]})]})})}console.log("MODE= "+t);return Object(S.jsx)("tbody",{children:Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:Object(S.jsx)(M.a,{type:"date",className:"form-control",id:"dp",required:!0,selected:b,onChange:function(e){return h(e)}})}),Object(S.jsx)("td",{children:Object(S.jsx)(M.a,{type:"date",className:"form-control",id:"dp2",required:!0,selected:f,onChange:function(e){return x(e)}})}),Object(S.jsx)("td",{children:Object(S.jsx)(F.a.Control,{as:"select",id:"type",custom:!0,value:g,onChange:function(e){var t=e.target;k(t.value)},children:s.map((function(e,t){return Object(S.jsxs)("option",{value:e,children:[" ",e]},t)}))})}),Object(S.jsx)("td",{children:Object(S.jsx)(y.a,{type:"submit",className:"btn btn-success",id:u,onClick:function(e){var a;a=e,e.target.id,""!==b&&""!==f&&(a.preventDefault(),0===t&&r(5,{startDate:b,endDate:f}))},children:Object(S.jsx)(A.a,{id:u})})}),Object(S.jsx)("td",{children:Object(S.jsx)(y.a,{className:"btn btn-secondary",id:a._id,onClick:function(e){w(2,e.target.id)},children:Object(S.jsx)(N.a,{id:a._id})})})]})})}),T=a(213),H=(a(195),function(e){var t=e.mode,a=e.data,n=e.header,r=e.func,c=function(e){var t=e.header;return Object(S.jsx)("tbody",{children:Object(S.jsx)("tr",{children:t.map((function(e,t){return Object(S.jsx)("th",{children:e},t)}))})})};return Object(S.jsx)(F.a,{className:"overflow-auto form",style:{maxHeight:"587px"},autoComplete:"off",children:Object(S.jsxs)(T.a,{className:"table table-sm table-primary",responsive:"sm",children:[a.length>0&&Object(S.jsx)(c,{header:n}),a.length>0&&a.map((function(e){return Object(S.jsx)(q,{mode:t,item:e,func:r},e.ride_id)}))]})})}),I=a(216),P=a(115),L=a(222),z=function(e){var t=e.show,a=e.close,n=e.params,r={backgroundColor:n.style.backgroundcolor,color:n.style.color,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"};return Object(S.jsxs)("div",{children:[n.autohide&&Object(S.jsxs)(L.a,{style:r,onClose:function(){return a()},show:t,delay:n.delay,autohide:!0,children:[Object(S.jsx)(L.a.Header,{style:{backgroundColor:"black",color:"white"},children:Object(S.jsx)("strong",{className:"mr-auto",children:n.header})}),Object(S.jsx)(L.a.Body,{children:n.message})]}),!n.autohide&&Object(S.jsxs)(L.a,{style:r,onClose:function(){return a()},show:t,children:[Object(S.jsx)(L.a.Header,{children:Object(S.jsx)("strong",{className:"mr-auto",children:n.header})}),Object(S.jsx)(L.a.Body,{children:n.message})]})]})},G=function(e){var t,a,r=e.df,c=e.years,s=Object(n.useState)("bar"),i=Object(l.a)(s,2),o=i[0],u=i[1],d=[];c.forEach((function(e){var n=r.loc({columns:["distance","start_date"]});t=Object(_.c)(n.start_date).year().eq(e),n=n.loc({rows:t}),a=n.distance.sum(),a=Math.round(a/1e3),d.push(a)}));var j,b,h=new _.a({ride:d},{index:c});"bar"===o?(j={width:1e3,plot_bgcolor:"#00BBAA",paper_bgcolor:"#00BB55",yaxis:{title:"km"},xaxis:{title:"Year"}},b={displayModeBar:!1,displaylogo:!1},h.plot("plot_div").bar({layout:j,config:b})):(j={title:{text:"",x:0},legend:{bgcolor:"#fcba03",bordercolor:"#444",borderwidth:1,font:{family:"Arial",size:10,color:"#fff"}},width:1e3,yaxis:{title:"km"},xaxis:{title:"Year"}},b={columns:["ride"],displayModeBar:!1,displaylogo:!1},h.plot("plot_div").line({layout:j,config:b}));return Object(S.jsx)("div",{children:Object(S.jsx)("select",{style:{background:"cyan"},value:o,onChange:function(e){var t=e.target;u(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})})},K=a(12),U=function(e){var t=e.df,a=e.years,r=Object(n.useState)("bar"),c=Object(l.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)(a[0]),u=Object(l.a)(o,2),d=u[0],j=u[1],b=t.loc({columns:["distance","start_date"]}),h=parseInt(d),O=Object(_.c)(b.start_date).year().eq(h);b=b.loc({rows:O});for(var p=[],f=0;f<12;f++){O=Object(_.c)(b.start_date).month().eq(f);var x=b.loc({rows:O}).distance.sum();x=Math.round(x/1e3),p.push(x)}if("line"===s){var m=Object(K.a)(Array(12).keys()).map((function(e){return e+1}));new _.a({ride:p},{index:m}).plot("plot_div").line({layout:{title:{text:"",x:0},width:1e3,yaxis:{title:"km"},xaxis:{title:"Month"},plot_bgcolor:"#133863",paper_bgcolor:"#133863"},config:{columns:["ride"],displayModeBar:!1,displaylogo:!1}})}else{var v=Object(K.a)(Array(12).keys()).map((function(e){return e+1}));new _.a({ride:p},{index:v}).plot("plot_div").bar({layout:{width:1e3,plot_bgcolor:"#133863",paper_bgcolor:"#133863",yaxis:{title:"km",color:"#00FF00"},xaxis:{title:"Month",color:"#00FFFF"}},config:{displayModeBar:!1,displaylogo:!1}})}return Object(S.jsxs)("div",{children:[Object(S.jsx)("select",{style:{background:"cyan"},value:s,onChange:function(e){var t=e.target;i(t.value)},children:["bar","line"].map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))}),Object(S.jsx)("select",{style:{background:"darkcyan"},value:d,onChange:function(e){var t=e.target;j(t.value)},children:a.map((function(e,t){return Object(S.jsx)("option",{value:e,children:e},t)}))})]})},Y=function(e){var t=e.callBack,a=(e.user,Object(n.useState)()),r=Object(l.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(),j=Object(l.a)(i,2),b=j[0],h=j[1],O=Object(n.useState)(2),p=Object(l.a)(O,2),f=p[0],x=p[1],m=Object(n.useState)([]),k=Object(l.a)(m,2),w=k[0],C=k[1],F=Object(n.useState)(0),D=Object(l.a)(F,2),B=D[0],A=D[1],N=Object(n.useState)(!1),E=Object(l.a)(N,2),M=E[0],q=E[1],T=Object(n.useState)({header:"",message:"",autohide:!1,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),L=Object(l.a)(T,2),K=L[0];L[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("getActivitiesData");case 2:return a=e.sent,n=new _.a(a),console.log(n),e.t0=h,e.next=8,Y(n);case 8:e.t1=e.sent,(0,e.t0)(e.t1),s(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var Y=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=t.loc({columns:["start_date"]})).start_date=Object(_.c)(a.start_date).year(),a=a.loc({columns:["start_date"]}),n=new _.b(a.start_date.values),e.abrupt("return",n.unique().values);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===t?(C([[]]),x(t)):5===t&&R(a);case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,r,s,i,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.startDate,n=t.endDate,a=new Date(a.setUTCHours(0,0,0,0)),n=new Date(n.setUTCHours(23,59,0,0)),a=a.toISOString(),n=n.toISOString(),r=c.loc({columns:["ride_id","start_date","moving_time","distance","average_speed","average_heartrate"]}),s=[],i=0;i<r.index.length;i++)(u=r.at(i,"start_date"))>=a&&u<=n&&(console.log(u),l=r.iloc({rows:[i]}).toJSON(),console.log("----------------------------------"),l[0].distance=l[0].distance/1e3,l[0].average_speed=(l[0].distance/l[0].moving_time*3600).toFixed(2),s.push(l[0]));C(s),x(2);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=["Start","End","Topic"];return 2===f&&(V=["Date","Duration (s)","Distance (km)","Avg speed (km/h)","Avg hr"]),Object(S.jsxs)(d.a,{children:[Object(S.jsxs)(v.a,{style:{background:"#000000"},variant:"dark",children:[Object(S.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(S.jsx)(g.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"outline-info",onClick:function(){document.getElementById("plot_div").style.visibility="visible",A(1)},children:"Years"})}),Object(S.jsx)(g.a,{className:"ml-2",children:Object(S.jsx)(y.a,{variant:"outline-info",onClick:function(){document.getElementById("plot_div").style.visibility="visible",A(2)},children:"Months"})}),Object(S.jsx)(g.a,{children:Object(S.jsx)(y.a,{className:"ml-2",variant:"outline-success",onClick:function(){J(0,null),A(3),document.getElementById("plot_div").style.visibility="hidden"},children:"Query"})})]}),Object(S.jsx)(I.a,{children:Object(S.jsx)(P.a,{children:Object(S.jsx)("h2",{children:" "})})}),1===B&&Object(S.jsx)(G,{df:c,years:b}),2===B&&Object(S.jsx)(U,{df:c,years:b}),3===B&&Object(S.jsx)(H,{mode:f,data:w,header:V,func:J}),Object(S.jsx)("div",{id:"plot_div"}),Object(S.jsx)(z,{show:M,close:function(){q(!1)},params:K})]})},J=function(e){var t=e.user,a=e.admin,n=e.callBack,r=Object(b.f)().pathname;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(v.a,{style:{background:"#091834"},variant:"light",children:[Object(S.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(S.jsx)(m.b,{to:"/",className:"mr-auto",children:Object(S.jsx)(g.a,{children:Object(S.jsx)(y.a,{variant:"success",children:Object(S.jsx)(k.a,{color:"white",size:22})})})}),t&&Object(S.jsxs)(S.Fragment,{children:["/"===r&&Object(S.jsx)(m.b,{to:"/MyActivities",className:"ml-auto",children:Object(S.jsx)(g.a,{children:Object(S.jsx)(y.a,{variant:"outline-warning",children:"Activities"})})}),a&&Object(S.jsx)(g.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"outline-info",onClick:function(){n("updateDb")},children:"Update Db"})}),Object(S.jsx)("div",{className:"ml-auto",style:{paddingRight:"15px",color:"darkmagenta"},children:"Kirjautunut: "+t}),Object(S.jsx)(m.b,{to:"/",children:Object(S.jsx)(g.a,{children:Object(S.jsx)(y.a,{variant:"dark",onClick:function(){n("logout")},children:"Kirjaudu ulos"})})})]}),!t&&Object(S.jsx)(g.a,{className:"ml-auto",children:Object(S.jsx)(y.a,{variant:"info",onClick:function(){n("login")},children:"Kirjaudu"})})]}),Object(S.jsxs)(b.d,{children:[Object(S.jsx)(b.b,{path:"/",element:Object(S.jsx)(C,{})}),Object(S.jsx)(b.b,{path:"/MyActivities",element:t?Object(S.jsx)(Y,{callBack:n,user:t}):Object(S.jsx)(b.a,{to:"/",replace:!0})}),Object(S.jsx)(b.b,{path:"*",element:Object(S.jsx)(b.a,{to:"/"})})]})]})},R=a(219),V=function(e){var t=e.show,a=e.close,r=e.func,c=Object(n.useState)(""),s=Object(l.a)(c,2),i=s[0],d=s[1],j=Object(n.useState)(""),b=Object(l.a)(j,2),h=b[0],O=b[1],p=Object(n.useState)(""),f=Object(l.a)(p,2),x=f[0],m=f[1],v=Object(n.useState)(""),g=Object(l.a)(v,2),k=g[0],w=g[1],C=Object(n.useState)(!1),_=Object(l.a)(C,2),D=_[0],B=_[1],A=Object(n.useState)(!1),N=Object(l.a)(A,2),E=N[0],M=N[1],q=Object(n.useState)({header:"",message:"",autohide:!0,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),T=Object(l.a)(q,2),H=T[0],I=T[1],P=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return a={firstname:i,lastname:h,email:x,password:k,admin:D},e.next=4,r(2,a);case 4:200!==(n=e.sent).code?I({header:"Virhe",message:n.message,closeParent:!1,autohide:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}):200===n.code&&I({header:"Rekister\xf6inti onnistui",message:n.message,closeParent:!0,autohide:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}),L(),M(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){d(""),O(""),m(""),w(""),B(!1)};return t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(F.a,{onSubmit:function(e){e.preventDefault(),P(!0)},children:[Object(S.jsxs)(R.a.Body,{children:[Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Etunimi"}),Object(S.jsx)(F.a.Control,{type:"input",placeholder:"Etunimi",value:i,onChange:function(e){var t=e.target;return d(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Sukunimi"}),Object(S.jsx)(F.a.Control,{type:"input",placeholder:"Sukunimi",value:h,onChange:function(e){var t=e.target;return O(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Email"}),Object(S.jsx)(F.a.Control,{type:"email",placeholder:"email",value:x,onChange:function(e){var t=e.target;return m(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{children:[Object(S.jsx)(F.a.Label,{children:"Salasana"}),Object(S.jsx)(F.a.Control,{type:"password",placeholder:"Salasana",value:k,onChange:function(e){var t=e.target;return w(t.value)},required:!0})]}),Object(S.jsx)(F.a.Group,{controlId:"formBasicCheckbox",children:Object(S.jsx)(F.a.Check,{type:"checkbox",label:"Admin",onChange:function(e){B(e.target.checked)}})})]}),Object(S.jsxs)(R.a.Footer,{children:[Object(S.jsx)(y.a,{variant:"secondary",onClick:function(){a(!1)},children:"Sulje"}),Object(S.jsx)(y.a,{type:"Submit",variant:"primary",children:"Valmis"})]})]}),Object(S.jsx)(z,{show:E,close:function(){M(!1),H.closeParent&&a(!1)},params:H})]}):null},Q=function(e){var t=e._show,a=e.showDialog,r=e.func,c=Object(n.useState)(""),s=Object(l.a)(c,2),i=s[0],d=s[1],j=Object(n.useState)(""),b=Object(l.a)(j,2),h=b[0],O=b[1],p=Object(n.useState)(!1),f=Object(l.a)(p,2),x=f[0],m=f[1],v=Object(n.useState)(!1),g=Object(l.a)(v,2),k=g[0],w=g[1],C=Object(n.useState)({title:"Kirjautuminen",btnClose:"Sulje"}),_=Object(l.a)(C,2),D=_[0],B=_[1],A=Object(n.useState)(!1),N=Object(l.a)(A,2),E=N[0],M=N[1],q=Object(n.useState)({header:"",message:"",autohide:!1,delay:0,style:{backgroundcolor:"#00FF00",color:"blue"}}),T=Object(l.a)(q,2),H=T[0],I=T[1];Object(n.useEffect)((function(){B(D),m(t),t||w(!1)}),[t,D]);var P=function(){B({title:"Rekister\xf6inti",btnClose:"Sulje"})},L=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,c,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return n={email:i,password:h},e.next=4,r(1,n);case 4:null===(c=e.sent)||404===c.code||401===c.code?(s=null,u=!1,null===c?(u=!0,s="Ei yhteytt\xe4 backendiin"):s=c.message,I({header:"Error",message:s,autohide:!0,delay:2e3,closeParent:u,style:{backgroundcolor:"#00FF00",color:"blue"}}),M(!0)):200===c.code&&(I({header:"Kirjautuminen onnistui",message:"Tervetuloa ;)",autohide:!0,delay:2e3,closeParent:!0,style:{backgroundcolor:"#00FF00",color:"blue"}}),M(!0)),e.next=9;break;case 8:a(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(R.a,{show:x,onHide:function(){},children:[Object(S.jsx)(R.a.Header,{closeButton:!0,onClick:function(){L(!1)},children:Object(S.jsx)(R.a.Title,{children:D.title})}),!k&&Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(F.a,{onSubmit:function(e){e.preventDefault(),L(!0)},children:[Object(S.jsxs)(R.a.Body,{children:[Object(S.jsxs)(F.a.Group,{controlId:"formBasicEmail",children:[Object(S.jsx)(F.a.Label,{children:"Email"}),Object(S.jsx)(F.a.Control,{type:"email",placeholder:"Enter email",value:i,onChange:function(e){var t=e.target;return d(t.value)},required:!0})]}),Object(S.jsxs)(F.a.Group,{controlId:"formBasicPassword",children:[Object(S.jsx)(F.a.Label,{children:"Salasana"}),Object(S.jsx)(F.a.Control,{type:"password",placeholder:"Password",value:h,onChange:function(e){var t=e.target;return O(t.value)},required:!0})]})]}),Object(S.jsx)(R.a.Footer,{children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(y.a,{variant:"warning",className:"mr-auto",onClick:function(){var e;e=!0,P(),w(e)},children:"Uusi k\xe4ytt\xe4j\xe4"}),Object(S.jsx)(y.a,{variant:"secondary",onClick:function(){L(!1)},children:D.btnClose}),Object(S.jsx)(y.a,{type:"submit",variant:"primary",children:"Kirjaudu"})]})})]})}),Object(S.jsx)(V,{show:k,close:function(){B({title:"Kirjautuminen",btnClose:"Sulje"}),w(!1)},func:r}),Object(S.jsx)(z,{show:E,close:function(){M(!1),H.closeParent&&a(!1)},params:H})]})})},W=function(e){var t=e.show,a=e.onHide,n=e.updateDb;return Object(S.jsxs)(R.a,{show:t,onHide:a,size:"sm","aria-labelledby":"contained-modal-title-vcenter",centered:!0,backdrop:"static",children:[Object(S.jsx)(R.a.Header,{closeButton:!0,children:Object(S.jsx)(R.a.Title,{id:"contained-modal-title-vcenter",children:"Update the database"})}),Object(S.jsxs)(R.a.Body,{children:[Object(S.jsx)("h5",{children:"Are you sure?"}),Object(S.jsx)("p",{})]}),Object(S.jsxs)(R.a.Footer,{children:[Object(S.jsx)(y.a,{variant:"secondary",onClick:a,children:"No"}),Object(S.jsx)(y.a,{variant:"primary",onClick:function(){a(!1),n(!0)},children:"Yes"})]})]})},X=a(218),Z=function(e){var t=e.show,a=e.message;return Object(S.jsx)(R.a,{show:t,size:"sm",backdrop:"static",keyboard:!1,centered:!0,children:Object(S.jsxs)(y.a,{variant:"primary",disabled:!0,children:[Object(S.jsx)(X.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),Object(S.jsx)("span",{children:"\xa0\xa0\xa0"}),a]})})},$=(a(198),function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(l.a)(c,2),i=s[0],h=s[1],O=Object(n.useState)(""),p=Object(l.a)(O,2),m=p[0],v=p[1],g=Object(n.useState)(!1),y=Object(l.a)(g,2),k=y[0],w=y[1],C=Object(n.useState)(""),_=Object(l.a)(C,2),F=_[0],D=_[1],B=Object(n.useState)(!1),A=Object(l.a)(B,2),N=A[0],E=A[1],M=Object(n.useState)(!1),q=Object(l.a)(M,2),T=q[0],H=q[1],I=Object(n.useState)(!1),P=Object(l.a)(I,2),L=P[0],z=P[1],G=Object(b.g)(),K=function(){return{headers:{Authorization:"bearer ".concat(F)}}},U=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.updateDataToMongo(K());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=Object(j.a)("/");return e.on("onProgress",(function(e){console.log("message from backend onProgress "+e),alert(e),H(e)})),e.on("connect",(function(e){console.log("socket connected")})),e.on("connected",(function(e){console.log("message from backend connected"+e)})),function(){e.disconnect()}}),[]),Object(n.useEffect)((function(){""!==i&&function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getDataFromMongo(K());case 2:t=e.sent,r(t);try{G("/MyActivities")}catch(a){alert(a.message)}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[F]);var Y=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.register(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(o.a.mark((function e(t,a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==t){e.next=13;break}if(null===a){e.next=11;break}return e.next=4,f.login(a);case 4:if(null===(r=e.sent)){e.next=10;break}return 200===r.code&&(h(r.data.email),v(r.data.firstname),w(r.data.admin),D(r.data.token)),e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:e.next=17;break;case 13:if(2!==t){e.next=17;break}return e.next=16,Y(a);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("getActivitiesData"!==t){e.next=4;break}return e.abrupt("return",a);case 4:"updateDb"===t?X():"login"===t?E(!0):"logout"===t&&v("");case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){z(!0)},$=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==t){e.next=3;break}return e.next=3,U();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(d.a,{fluid:!0,className:"App",children:[Object(S.jsxs)("div",{style:{backgroundColor:"#353b45"},children:[Object(S.jsx)(Q,{_show:N,showDialog:E,func:R}),Object(S.jsx)(W,{show:L,onHide:function(){return z(!1)},updateDb:$}),Object(S.jsx)(Z,{show:T,message:"Loading..."})]}),Object(S.jsx)(J,{user:m,admin:k,callBack:V})]})});s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(m.a,{children:Object(S.jsx)($,{})})}),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.8dfc89b2.chunk.js.map