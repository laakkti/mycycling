{"version":3,"sources":["services/user-service.js","services/data-service.js","img/logo.svg","routes/Homepage.js","components/Row.js","components/DataForm.js","components/ToastMsg.js","components/YearsGraph.js","components/MonthsGraph.js","components/MonthsSummaryGraph.js","routes/MyActivities.js","components/OnProgressModal.js","nav/Navigation.js","components/RegisterForm.js","components/LoginDialog.js","components/ConfirmModal.js","App.js","index.js"],"names":["require","config","baseUrl","console","log","login","user","a","axios","post","_response","response","code","status","data","undefined","error","message","register","newUser","getDataFromMongo","get","updateDataToMongo","Homepage","style","paddingLeft","paddingTop","color","fontSize","marginTop","display","alignItems","justifyContent","src","Logo","width","alt","Row","mode","item","func","_selectedIndex","useState","typeOptions","id","Date","startDate","setStartDate","endDate","setEndDate","type","setType","selectedIndex","setSelectedIndex","useEffect","handleRow","values","dateString","date","month","getMonth","toString","day","getDate","year","getFullYear","length","getFormmatedDate","start_date","moving_time","distance","average_speed","average_heartrate","background","map","ind","textAlign","Button","className","_id","onClick","e","target","marginLeft","required","selected","onChange","Form","Control","as","custom","value","event","preventDefault","DataForm","header","thisFunc","HeaderRow","maxHeight","autoComplete","Table","responsive","ride_id","ToastMsg","show","close","params","backgroundColor","backgroundcolor","position","top","left","transform","autohide","Toast","onClose","delay","Header","Body","YearsGraph","condition","tmp","df","_years","setMode","val","setVal","years","setYears","_val","forEach","sub_df","loc","columns","toDateTime","eq","rows","sum","Math","round","push","layout","gDf","DataFrame","ride","index","plot_bgcolor","paper_bgcolor","yaxis","title","xaxis","displayModeBar","displaylogo","plot","bar","text","x","line","MonthsGraph","setYear","Array","end","keys","months","_year","parseInt","MonthsSummaryGraph","items","i","legend","bgcolor","font","family","size","MyActivities","callBack","setDf","topics","topic","setTopic","myDataToShow","setMyDataToShow","showMode","setShowMode","showToast","setShowToast","getYears","getData","sf","Series","unique","handleForm","_mode","doQuery","setUTCHours","toISOString","result","at","iloc","toJSON","toFixed","Container","Navbar","variant","Toggle","aria-controls","NavItem","borderStyle","Col","OnProgressModal","Modal","backdrop","keyboard","centered","disabled","Spinner","animation","role","aria-hidden","Navigation","admin","progress","progressShow","setProgressShow","path","useLocation","pathname","to","paddingRight","element","replace","RegisterForm","firstName","setFirstName","surName","setSurName","email","setEmail","password","setPassword","setAdmin","setMessage","handleRegin","p","regData","closeParent","clearFields","onSubmit","Group","Label","placeholder","controlId","Check","label","checked","Footer","LoginDialog","_show","showDialog","setShow","showRegister","setShowRegister","btnClose","labels","setLabels","regLabels","handleLogin","auth","onHide","closeButton","Title","ConfirmModal","updateDb","aria-labelledby","App","mongoData","setMongoData","setUser","userName","setUserName","token","setToken","setLogin","confirmShow","setConfirmShow","navigate","useNavigate","getConfig","headers","Authorization","dataService","socket","socketIOClient","on","disconnect","exception","alert","handleRegister","userService","firstname","updateDatabase","fluid","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2379bce9.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nrequire('dotenv').config();\r\nlet baseUrl = '/api/user/';\r\nif (process.env.NODE_ENV === 'development')\r\n  baseUrl = 'http://localhost:5000/api/user/';\r\n\r\nconsole.log(baseUrl);\r\n\r\nconst login = async (user) => {\r\n\r\n  try {\r\n\r\n    const _response = await axios.post(baseUrl + 'login', user);\r\n\r\n    const response = {\r\n      code: _response.status,\r\n      data: _response.data\r\n    }\r\n\r\n    return response;\r\n\r\n  } catch (exception) {\r\n\r\n\r\n    let error = exception.response;\r\n\r\n    if (error !== undefined) {\r\n\r\n      let response = {\r\n        code: error.status,\r\n        message: error.data.error\r\n      }\r\n\r\n      return response;\r\n    } else {\r\n\r\n      return null;\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nconst register = async (newUser) => {\r\n\r\n  if (newUser === null) {\r\n    return null\r\n  }\r\n\r\n  try {\r\n\r\n    const response = await axios.post(baseUrl + 'register', newUser);\r\n\r\n    let _response = {\r\n      code: response.status,\r\n      message: response.data.message\r\n    }\r\n\r\n    return _response;\r\n\r\n  } catch (exception) {\r\n\r\n    let error = exception.response;\r\n\r\n    let response = {\r\n      code: error.status,\r\n      message: error.data.error\r\n    }\r\n    return response;\r\n  }\r\n\r\n\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { login, register }","import axios from \"axios\";\r\n\r\nrequire(\"dotenv\").config();\r\nlet baseUrl = \"/api/data/\";\r\nif (process.env.NODE_ENV === \"development\")\r\n  baseUrl = \"http://localhost:5000/api/data/\";\r\n\r\nconst getDataFromMongo = async (config) => {\r\n  const response = await axios.get(baseUrl + \"getactivities\", config);\r\n\r\n  return response.data;\r\n};\r\n\r\nconst updateDataToMongo = async (config) => {\r\n  const response = await axios.get(baseUrl + \"getstravaactivities\", config);\r\n  // palauttaa datan pituuden\r\n\r\n  return response.data;\r\n};\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { getDataFromMongo, updateDataToMongo };\r\n","export default __webpack_public_path__ + \"static/media/logo.596a690d.svg\";","import React from \"react\";\r\nimport Logo from \"../img/logo.svg\";\r\n\r\nconst Homepage = () => {\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ paddingLeft: \"10px\", paddingTop: \"10px\" }}>\r\n        <div style={{ color: \"white\", fontSize: \"30px\" }}>\r\n          Pyöräilyaktiviteettien data-analytiikka\r\n        </div>\r\n\r\n        <h6 style={{ color: \"#609CE1\",marginTop: \"8px\"}}>2022 ©AA4598</h6>\r\n      </div>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        <img src={Logo} width=\"40%\" style={{ marginTop: \"50px\" }} alt=\"\"></img>\r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n};\r\nexport default Homepage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Button, Form } from \"react-bootstrap\";\r\nimport { Pencil, Trash, Search } from \"react-bootstrap-icons\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nconst Row = ({ mode, item, func,_selectedIndex }) => {\r\n  const [typeOptions] = useState([\r\n    \"Moving time\",\r\n    \"Distance\",\r\n    \"Average speed\",\r\n    \"Average heartrate\",\r\n  ]);\r\n  const [id, setId] = useState(\"\");\r\n  const [startDate, setStartDate] = useState(new Date());\r\n  const [endDate, setEndDate] = useState(new Date());\r\n  const [type, setType] = useState(typeOptions[0]);\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n  \r\n\r\n  useEffect(() => {\r\n    \r\n    \r\n    if(_selectedIndex!==null && mode!==0){\r\n      setSelectedIndex(_selectedIndex);\r\n    }else{\r\n      setSelectedIndex(0);\r\n    }\r\n\r\n  }, [_selectedIndex, mode]);\r\n\r\n  const handleRow = (mode, id) => {\r\n    func(mode, id);\r\n  };\r\n\r\n  if (mode === 2) {\r\n    \r\n    \r\n    const getFormmatedDate = (dateString) => {\r\n      const date = new Date(dateString);\r\n      let month = (date.getMonth() + 1).toString();\r\n      let day = date.getDate().toString();\r\n      let year = date.getFullYear().toString();\r\n      if (month.length < 2) month = \"0\" + month;\r\n      if (day.length < 2) day = \"0\" + day;\r\n\r\n      return month + \"/\" + day + \"/\" + year;\r\n    };\r\n\r\n    let formattedDate = getFormmatedDate(item.start_date);\r\n\r\n    let values = [\r\n      formattedDate,\r\n      item.moving_time,\r\n      item.distance,\r\n      item.average_speed,\r\n      item.average_heartrate,\r\n    ];\r\n\r\n    let style = { background: \"#7AABFF\" };\r\n\r\n    return (\r\n      <tbody>\r\n        <tr>\r\n        {values.map((item, ind) => {\r\n            return ind === (selectedIndex+1) ? (\r\n              <td key={ind} style={style}>\r\n                {item}\r\n              </td>\r\n            ) : (\r\n              <td key={ind}> {item} </td>\r\n            );\r\n          })}\r\n          <td style={{ textAlign: \"right\" }}>\r\n            <Button\r\n              className=\"btn btn-success btn-sm\"\r\n              id={item._id}\r\n              onClick={(e) => {\r\n                handleRow(3, e.target.id);\r\n              }}\r\n            >\r\n              <Pencil id={item._id}></Pencil>\r\n            </Button>\r\n            <Button\r\n              className=\"btn btn-secondary btn-sm\"\r\n              style={{ marginLeft: \"5px\" }}\r\n              id={item._id}\r\n              onClick={(e) => {\r\n                handleRow(1, e.target.id);\r\n              }}\r\n            >\r\n              <Trash id={item._id}></Trash>\r\n            </Button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    );\r\n  } else {\r\n    console.log(\"MODE= \" + mode);\r\n\r\n    // parametri turha kun/jos käytetään tilamuuttujaa\r\n    const handleSearch = (event, _id) => {\r\n      if (startDate === \"\" || endDate === \"\") {\r\n        return;\r\n      } else {\r\n        event.preventDefault();\r\n\r\n        const data = {\r\n          startDate: startDate,\r\n          endDate: endDate,\r\n        };\r\n\r\n        if (mode === 0) {\r\n\r\n          func(5, data,selectedIndex);\r\n        } else {\r\n          //func(6, data);\r\n        }\r\n      }\r\n    };\r\n\r\n    return (\r\n      <tbody>\r\n        <tr>\r\n          <td>\r\n            <DatePicker\r\n              type=\"date\"\r\n              className=\"form-control\"\r\n              id=\"dp\"\r\n              required\r\n              selected={startDate}\r\n              onChange={(startDate) => setStartDate(startDate)}\r\n            />\r\n          </td>\r\n          <td>\r\n            <DatePicker\r\n              type=\"date\"\r\n              className=\"form-control\"\r\n              id=\"dp2\"\r\n              required\r\n              selected={endDate}\r\n              onChange={(endDate) => setEndDate(endDate)}\r\n            />\r\n          </td>\r\n          <td>\r\n            <Form.Control\r\n              as=\"select\"\r\n              id=\"type\"\r\n              custom\r\n              value={type}\r\n              onChange={({ target }) => {\r\n                setSelectedIndex(target.selectedIndex);\r\n                setType(target.value);\r\n              }}\r\n            >\r\n              {typeOptions.map((item, ind) => {\r\n                return (\r\n                  <option key={ind} value={item}>                    \r\n                    {item}\r\n                  </option>\r\n                );\r\n              })}\r\n            </Form.Control>\r\n          </td>\r\n\r\n          <td>\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"float-right btn btn-success\"\r\n              id={id}\r\n              onClick={(e) => {\r\n                handleSearch(e, e.target.id);\r\n              }}\r\n            >\r\n              <Search id={id}></Search>\r\n            </Button>\r\n          </td>\r\n          <td>\r\n            {/*<Button className=\"btn btn-secondary\" id={item._id} onClick={(e) => { handleRow(2, e.target.id) }}>\r\n              <XCircleFill id={item._id}></XCircleFill>\r\n            </Button>*/}\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    );\r\n  }\r\n};\r\nexport default Row;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Row from \"./Row\";\r\nimport { Table, Form } from \"react-bootstrap\";\r\nimport \"./css/form.css\";\r\n\r\nconst DataForm = ({ mode, data, header, func }) => {\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n  const thisFunc = (mode, data, selectedIndex) => {\r\n    func(mode, data);\r\n    setSelectedIndex(selectedIndex);\r\n  };\r\n\r\n  const HeaderRow = ({ header }) => {\r\n    return (\r\n      <tbody>\r\n        <tr>\r\n          {header.map((item, ind) => {\r\n            return (\r\n              <td key={ind} style={{ background: \"#091834\", color: \"#79abff\" }}>\r\n                {item}\r\n              </td>\r\n            );\r\n          })}\r\n        </tr>\r\n      </tbody>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Form\r\n      className=\"overflow-auto form\"\r\n      style={{\r\n        maxHeight: \"587px\",\r\n      }}\r\n      autoComplete=\"off\"\r\n    >\r\n      <Table className=\"table table-sm table-primary\" responsive=\"sm\">\r\n        {data.length > 0 && <HeaderRow header={header} />}\r\n        {data.length > 0 &&\r\n          data.map((item) => {\r\n            return (\r\n              <Row\r\n                key={item.ride_id}\r\n                mode={mode}\r\n                item={item}\r\n                func={thisFunc}\r\n                _selectedIndex={selectedIndex}\r\n              />\r\n            );\r\n          })}\r\n      </Table>\r\n    </Form>\r\n  );\r\n};\r\nexport default DataForm;\r\n","import React from 'react'\r\nimport { Toast } from 'react-bootstrap';\r\n\r\nconst ToastMsg = ({ show, close, params }) => {\r\n\r\n  const style = {\r\n\r\n    backgroundColor: params.style.backgroundcolor,\r\n    color: params.style.color,\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)'\r\n\r\n  }\r\n\r\n  const headerStyle = {\r\n    backgroundColor: 'black',\r\n    color: 'white'\r\n  }\r\n\r\n  return (\r\n\r\n    <div>\r\n      { params.autohide &&\r\n        <Toast style={style} onClose={() => close()} show={show} delay={params.delay} autohide>\r\n\r\n          <Toast.Header style={headerStyle}>\r\n            <strong className=\"mr-auto\">{params.header}</strong>\r\n\r\n          </Toast.Header>\r\n          <Toast.Body>{params.message}</Toast.Body>\r\n        </Toast>\r\n      }\r\n      {\r\n        !params.autohide &&\r\n        <Toast style={style} onClose={() => close()} show={show}>\r\n\r\n          <Toast.Header>\r\n            <strong className=\"mr-auto\">{params.header}</strong>\r\n\r\n          </Toast.Header>\r\n          <Toast.Body>{params.message}</Toast.Body>\r\n        </Toast>\r\n      }\r\n    </div >\r\n\r\n  );\r\n\r\n}\r\nexport default ToastMsg;","import React, { useState, useEffect } from \"react\";\r\nimport { DataFrame, toDateTime } from \"danfojs\";\r\nimport { Form } from \"react-bootstrap\";\r\n\r\nconst YearsGraph = ({ df, _years }) => {\r\n  const [mode, setMode] = useState(\"bar\");\r\n  const [val, setVal] = useState([]);\r\n  const [years, setYears] = useState([]);\r\n\r\n  let condition;\r\n  let tmp;\r\n\r\n  let _val = [];\r\n\r\n  _years.forEach((item) => {\r\n    let sub_df = df.loc({\r\n      columns: [\"distance\", \"start_date\"],\r\n    });\r\n\r\n    condition = toDateTime(sub_df[\"start_date\"]).year().eq(item);\r\n    sub_df = sub_df.loc({ rows: condition });\r\n\r\n    tmp = sub_df[\"distance\"].sum();\r\n    tmp = Math.round(tmp / 1000);\r\n    _val.push(tmp);\r\n  });\r\n\r\n  useEffect(() => {\r\n    setYears(_years);\r\n    setVal(_val);\r\n  }, []);\r\n\r\n\r\n  const gDf = new DataFrame({ ride: val }, { index: years });\r\n  let layout;\r\n  let config;\r\n\r\n  if (mode === \"bar\") {\r\n    layout = {\r\n      width: 1000,\r\n      plot_bgcolor: \"#133863\",\r\n      paper_bgcolor: \"#133863\",\r\n      yaxis: {\r\n        title: \"km\",\r\n        color: \"#00FF00\",\r\n      },\r\n      xaxis: {\r\n        title: \"Year\",\r\n        color: \"#00FF00\",\r\n      },\r\n    };\r\n\r\n    config = {\r\n      displayModeBar: false,\r\n      displaylogo: false,\r\n    };\r\n\r\n    gDf.plot(\"plot_div\").bar({ layout, config });\r\n  } else {\r\n    layout = {\r\n      title: {\r\n        text: \"\",\r\n        x: 0,\r\n      },\r\n      width: 1000,\r\n      plot_bgcolor: \"#133863\",\r\n      paper_bgcolor: \"#133863\",\r\n\r\n      yaxis: {\r\n        title: \"km\",\r\n        color: \"#00FF00\",\r\n      },\r\n      xaxis: {\r\n        title: \"Year\",\r\n        color: \"#00FF00\",\r\n      },\r\n    };\r\n\r\n    config = {\r\n      columns: [\"ride\"], //columns to plot\r\n      displayModeBar: false,\r\n      displaylogo: false,\r\n    };\r\n\r\n    gDf.plot(\"plot_div\").line({ layout, config });\r\n  }\r\n\r\n  const modes = [\"bar\", \"line\"];\r\n\r\n  return (\r\n    <div>\r\n      <div id=\"plot_div\" />\r\n      <Form.Control\r\n        className=\"float-right mr-5 btn\"\r\n        style={{ width: \"auto\"}}\r\n        as=\"select\"\r\n        id=\"type\"\r\n        custom\r\n        value={mode}\r\n        onChange={({ target }) => {\r\n          setMode(target.value);\r\n        }}\r\n      >\r\n        {modes.map((item, index) => {\r\n          return (\r\n            <option key={index} value={item}>\r\n              {item}\r\n            </option>\r\n          );\r\n        })}\r\n      </Form.Control>\r\n    </div>\r\n  );\r\n};\r\nexport default YearsGraph;","import React, { useState, useEffect } from \"react\";\r\nimport { DataFrame, toDateTime } from \"danfojs\";\r\nimport { Form } from \"react-bootstrap\";\r\n\r\nconst MonthsGraph = ({ df, _years }) => {\r\n  const [mode, setMode] = useState(\"bar\");\r\n  const [year, setYear] = useState(_years[0]);\r\n  const [val, setVal] = useState([]);\r\n  const [years, setYears] = useState([]);\r\n  const start = 1;\r\n  const end = 12;\r\n  const [months, setMonths] = useState(\r\n    [...Array(end - start + 1).keys()].map((x) => x + start)\r\n  );\r\n\r\n  /*useEffect(() => {\r\n    setYear(_years[0]);    \r\n  }, []);*/\r\n\r\n  let sub_df = df.loc({\r\n    columns: [\"distance\", \"start_date\"],\r\n  });\r\n\r\n  let _year = parseInt(year);\r\n\r\n  let condition = toDateTime(sub_df[\"start_date\"]).year().eq(_year);\r\n\r\n  sub_df = sub_df.loc({ rows: condition });\r\n\r\n  let _val = [];\r\n\r\n  for (let month = 0; month < 12; month++) {\r\n    condition = toDateTime(sub_df[\"start_date\"]).month().eq(month);\r\n    let sub_dfx = sub_df.loc({ rows: condition });\r\n\r\n    let sum = sub_dfx[\"distance\"].sum();\r\n\r\n    sum = Math.round(sum / 1000);\r\n\r\n    _val.push(sum);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setYears(_years);\r\n    //setVal(_val);\r\n  }, []);\r\n\r\n  if (mode === \"line\") {\r\n    const gDf = new DataFrame({ ride: _val }, { index: months });\r\n\r\n    const layout = {\r\n      title: {\r\n        text: \"\",\r\n        x: 0,\r\n      },\r\n\r\n      width: 1000,\r\n      yaxis: {\r\n        title: \"km\",\r\n        color: \"#FFA500\",\r\n      },\r\n      xaxis: {\r\n        title: \"Month\",\r\n        color: \"#FFA500\",\r\n      },\r\n      plot_bgcolor: \"#133863\",\r\n      paper_bgcolor: \"#133863\",\r\n    };\r\n\r\n    const config = {\r\n      columns: [\"ride\"], //columns to plot\r\n      displayModeBar: false,\r\n      displaylogo: false,\r\n    };\r\n\r\n    gDf.plot(\"plot_div\").line({ layout, config });\r\n  } else {\r\n    const gDf = new DataFrame({ ride: _val }, { index: months });\r\n\r\n    const layout = {\r\n      width: 1000,\r\n      plot_bgcolor: \"#133863\",\r\n      paper_bgcolor: \"#133863\",\r\n\r\n      yaxis: {\r\n        title: \"km\",\r\n        color: \"#FFA500\",\r\n      },\r\n      xaxis: {\r\n        title: \"Month\",\r\n        color: \"#FFA500\",\r\n      },\r\n    };\r\n\r\n    const config = {\r\n      displayModeBar: false,\r\n      displaylogo: false,\r\n    };\r\n\r\n    gDf.plot(\"plot_div\").bar({ layout, config });\r\n  }\r\n  const modes = [\"bar\", \"line\"];\r\n\r\n  return (\r\n    <div>\r\n      <div id=\"plot_div\" />\r\n      <Form.Control\r\n        className=\"float-right mr-5 btn\"\r\n        style={{ width: \"auto\" }}\r\n        as=\"select\"\r\n        id=\"type\"\r\n        custom\r\n        value={mode}\r\n        onChange={({ target }) => {\r\n          setMode(target.value);\r\n        }}\r\n      >\r\n        {modes.map((item, index) => {\r\n          return (\r\n            <option key={index} value={item}>\r\n              {item}\r\n            </option>\r\n          );\r\n        })}\r\n      </Form.Control>\r\n\r\n      <Form.Control\r\n        className=\"float-right mr-1 btn\"\r\n        style={{ width: \"auto\" }}\r\n        as=\"select\"\r\n        id=\"type\"\r\n        custom\r\n        value={year}\r\n        onChange={({ target }) => {\r\n          setYear(target.value);\r\n        }}\r\n      >\r\n        {years.map((item, index) => {\r\n          return (\r\n            <option key={index} value={item}>\r\n              {item}\r\n            </option>\r\n          );\r\n        })}\r\n      </Form.Control>\r\n            \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MonthsGraph;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { DataFrame, toDateTime } from \"danfojs\";\r\nimport { Form } from \"react-bootstrap\";\r\n\r\nconst MonthsSummaryGraph = ({ df, _years }) => {\r\n  const [mode, setMode] = useState(\"bar\");\r\n  const [year, setYear] = useState(_years[0]);\r\n  const [val, setVal] = useState([]);\r\n  const [years, setYears] = useState([]);\r\n  const start = 1;\r\n  const end = 12;\r\n  const [months, setMonths] = useState(\r\n    [...Array(end - start + 1).keys()].map((x) => x + start)\r\n  );\r\n\r\n  /*useEffect(() => {\r\n    setYear(_years[0]);    \r\n  }, []);*/\r\n\r\n  let summary = [];\r\n  let items = {};\r\n\r\n  //for (let i = 0; i < _years.length; i++) {\r\n  for (let i = 0; i < _years.length; i++) {\r\n    let sub_df = df.loc({\r\n      columns: [\"distance\", \"start_date\"],\r\n    });\r\n\r\n    let _year = parseInt(_years[i]);\r\n\r\n    let condition = toDateTime(sub_df[\"start_date\"]).year().eq(_year);\r\n\r\n    sub_df = sub_df.loc({ rows: condition });\r\n\r\n    let _val = [];\r\n\r\n    for (let month = 0; month < 12; month++) {\r\n      condition = toDateTime(sub_df[\"start_date\"]).month().eq(month);\r\n      let sub_dfx = sub_df.loc({ rows: condition });\r\n\r\n      let sum = sub_dfx[\"distance\"].sum();\r\n\r\n      sum = Math.round(sum / 1000);\r\n\r\n      _val.push(sum);\r\n    }\r\n    //summary.push(_val);\r\n    items[_years[i]] = _val;\r\n  }\r\n\r\n  useEffect(() => {\r\n    setYears(_years);\r\n    //setVal(_val);\r\n  }, []);\r\n\r\n  if (mode === \"line\") {\r\n    //const gDf = new DataFrame({ ride: _val }, { index: months });\r\n    const gDf = new DataFrame(items, { index: months });\r\n\r\n    const layout = {\r\n      title: {\r\n        text: \"\",\r\n        x: 0,\r\n      },\r\n      legend: {\r\n        bgcolor: \"133863\",\r\n        font: { family: \"Arial\", size: 12, color: \"#14a2b8\" },\r\n      },\r\n      width: 1000,\r\n      yaxis: {\r\n        title: \"km\",\r\n        color: \"#14a2b8\",\r\n      },\r\n      xaxis: {\r\n        title: \"Month\",\r\n        color: \"#14a2b8\",\r\n      },\r\n      plot_bgcolor: \"#133863\",\r\n      paper_bgcolor: \"#133863\",\r\n    };\r\n\r\n    const config = {\r\n      //columns: [\"ride\"], //columns to plot\r\n      displayModeBar: false,\r\n      displaylogo: false,\r\n    };\r\n\r\n    gDf.plot(\"plot_div\").line({ layout, config });\r\n  } else {\r\n    //const gDf = new DataFrame({ ride: _val }, { index: months });\r\n    const gDf = new DataFrame(items, { index: months });\r\n\r\n    const layout = {\r\n      width: 1000,\r\n      plot_bgcolor: \"#133863\",\r\n      paper_bgcolor: \"#133863\",\r\n\r\n      legend: {\r\n        bgcolor: \"133863\",\r\n        font: { family: \"Arial\", size: 12, color: \"#14a2b8\" },\r\n      },\r\n\r\n      yaxis: {\r\n        title: \"km\",\r\n        color: \"#FFA500\",\r\n      },\r\n      xaxis: {\r\n        title: \"Month\",\r\n        color: \"#FFA500\",\r\n      },\r\n    };\r\n\r\n    const config = {\r\n      displayModeBar: false,\r\n      displaylogo: false,\r\n    };\r\n\r\n    gDf.plot(\"plot_div\").bar({ layout, config });\r\n  }\r\n  const modes = [\"bar\", \"line\"];\r\n\r\n  return (\r\n    <div>\r\n      <div id=\"plot_div\" />\r\n      <Form.Control\r\n        className=\"float-right mr-5 btn\"\r\n        style={{ width: \"auto\" }}\r\n        as=\"select\"\r\n        id=\"type\"\r\n        custom\r\n        value={mode}\r\n        onChange={({ target }) => {\r\n          setMode(target.value);\r\n        }}\r\n      >\r\n        {modes.map((item, index) => {\r\n          return (\r\n            <option key={index} value={item}>\r\n              {item}\r\n            </option>\r\n          );\r\n        })}\r\n      </Form.Control>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MonthsSummaryGraph;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { DataFrame, toDateTime, Series } from \"danfojs\";\r\nimport DataForm from \"../components/DataForm\";\r\n\r\nimport { Button, Container, Row, Col, Form } from \"react-bootstrap\";\r\n\r\nimport { Navbar, NavItem } from \"react-bootstrap\";\r\n\r\nimport ToastMsg from \"../components/ToastMsg\";\r\nimport YearsGraph from \"../components/YearsGraph\";\r\nimport MonthsGraph from \"../components/MonthsGraph\";\r\nimport MonthsSummaryGraph from \"../components/MonthsSummaryGraph\";\r\n\r\nimport Logo from \"../img/logo.svg\";\r\n\r\nconst MyActivities = ({ callBack, user }) => {\r\n  const [df, setDf] = useState();\r\n  const [years, setYears] = useState();\r\n\r\n  const [mode, setMode] = useState(2);\r\n  const [topics, setTopics] = useState([\"Distance\"]);\r\n  const [topic, setTopic] = useState([\"Distance\"]);\r\n\r\n  //const [myData, setMyData] = useState([]);\r\n  const [myDataToShow, setMyDataToShow] = useState([]);\r\n\r\n  const [showMode, setShowMode] = useState(0); // oletus että kaikki näytetään\r\n  //  const [selectedIndex, setSelectedIndex] = useState(0);\r\n\r\n  const [showToast, setShowToast] = useState(false);\r\n  const [message, setMessage] = useState({\r\n    header: \"\",\r\n    message: \"\",\r\n    autohide: false,\r\n    delay: 0,\r\n    style: {\r\n      backgroundcolor: \"#00FF00\",\r\n      color: \"blue\",\r\n    },\r\n  });\r\n\r\n  //***************************************************************\r\n\r\n  useEffect(() => {\r\n    const getData = async () => {\r\n      const data = await callBack(\"getActivitiesData\");\r\n      const df = new DataFrame(data);\r\n      console.log(df);\r\n      setYears(await getYears(df));\r\n      setDf(df);\r\n    };\r\n    getData();\r\n  }, [callBack]);\r\n\r\n  const getYears = async (df) => {\r\n    let sub_df = df.loc({\r\n      columns: [\"start_date\"],\r\n    });\r\n    sub_df[\"start_date\"] = toDateTime(sub_df[\"start_date\"]).year();\r\n\r\n    sub_df = sub_df.loc({ columns: [\"start_date\"] });\r\n    let sf = new Series(sub_df[\"start_date\"].values);\r\n    return sf.unique().values;\r\n  };\r\n\r\n  const showTheToast = (header, message, delay, backgroundcolor, color) => {\r\n    setMessage({\r\n      header: header,\r\n      message: message,\r\n      autohide: true,\r\n      delay: delay,\r\n      closeParent: false,\r\n      style: {\r\n        backgroundcolor: backgroundcolor,\r\n        color: color,\r\n      },\r\n    });\r\n\r\n    setShowToast(true);\r\n  };\r\n\r\n  const handleForm = async (_mode, id, selectedIndex) => {\r\n    if (_mode === 0) {\r\n      let data = [];\r\n      //setSelectedIndex(selectedIndex);\r\n      setMyDataToShow([data]);\r\n      setMode(_mode);\r\n    } else if (_mode === 5) {\r\n      // id-muuttujassa tulee myös data vois toki olla 2 eri muuttujaa\r\n      let data = id;\r\n\r\n      doQuery(data);\r\n    }\r\n  };\r\n\r\n  const doQuery = async (data) => {\r\n    let startDate = data.startDate;\r\n    let endDate = data.endDate;\r\n\r\n    startDate = new Date(startDate.setUTCHours(0, 0, 0, 0));\r\n    endDate = new Date(endDate.setUTCHours(23, 59, 0, 0));\r\n\r\n    startDate = startDate.toISOString();\r\n    endDate = endDate.toISOString();\r\n\r\n    let sub_df = df.loc({\r\n      columns: [\r\n        \"ride_id\",\r\n        \"start_date\",\r\n        \"moving_time\",\r\n        \"distance\",\r\n        \"average_speed\",\r\n        \"average_heartrate\",\r\n      ],\r\n    });\r\n\r\n    let result = [];\r\n    for (let i = 0; i < sub_df.index.length; i++) {\r\n      let date = sub_df.at(i, \"start_date\");\r\n\r\n      if (date >= startDate && date <= endDate) {\r\n        console.log(date);\r\n        let val = sub_df.iloc({ rows: [i] }).toJSON();\r\n        console.log(\"----------------------------------\");\r\n        val[0].distance = val[0].distance / 1000;\r\n        val[0].average_speed = (\r\n          (val[0].distance / val[0].moving_time) *\r\n          3600\r\n        ).toFixed(2);\r\n\r\n        result.push(val[0]);\r\n      }\r\n    }\r\n\r\n    setMyDataToShow(result);\r\n    setMode(2);\r\n  };\r\n\r\n  let header = [\"Start\", \"End\", \"Topic\", \" \", \"\"]; // tyhjä koska buttoineille on oma sarakeensa data-riveillä\r\n  if (mode === 2) {\r\n    header = [\r\n      \"Date\",\r\n      \"Moving time (s)\",\r\n      \"Distance (km)\",\r\n      \"Avg speed (km/h)\",\r\n      \"Avg hr (bpm)\",\r\n      \" \",\r\n    ];\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Navbar style={{ background: \"#000000\" }} variant=\"dark\">\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n\r\n        <NavItem className=\"float-left\">\r\n          <Form.Control\r\n            className=\"mr-1 btn btn-info\"\r\n            style={{ width: \"auto\",background: \"#000000\",color:\"#00FFFF\",borderStyle:\"none\",fontSize: \"20px\" }}\r\n            as=\"select\"\r\n            id=\"type\"\r\n            custom\r\n            value={topic}\r\n            onChange={({ target }) => {\r\n              setTopic(target.value);\r\n            }}\r\n          >\r\n            {topics.map((item, index) => {\r\n              return (\r\n                <option key={index} value={item}>\r\n                  {item}\r\n                </option>\r\n              );\r\n            })}\r\n          </Form.Control>\r\n        </NavItem>\r\n\r\n        <NavItem className=\"ml-auto\">\r\n          <Button\r\n            variant=\"outline-success\"\r\n            onClick={() => {\r\n              setShowMode(1);\r\n            }}\r\n          >\r\n            Years\r\n          </Button>\r\n        </NavItem>\r\n        <NavItem className=\"ml-2\">\r\n          <Button\r\n            variant=\"outline-success\"\r\n            onClick={() => {\r\n              setShowMode(2);\r\n            }}\r\n          >\r\n            Months\r\n          </Button>\r\n        </NavItem>\r\n\r\n        <NavItem className=\"ml-2\">\r\n          <Button\r\n            variant=\"outline-info\"\r\n            onClick={() => {\r\n              setShowMode(4);\r\n            }}\r\n          >\r\n            Summary\r\n          </Button>\r\n        </NavItem>\r\n\r\n        <NavItem>\r\n          <Button\r\n            className=\"ml-2\"\r\n            variant=\"outline-primary\"\r\n            onClick={() => {\r\n              handleForm(0, null);\r\n              setShowMode(3);\r\n            }}\r\n          >\r\n            Query\r\n          </Button>\r\n        </NavItem>\r\n      </Navbar>\r\n\r\n      <Row>\r\n        <Col>\r\n          <h2> </h2>\r\n        </Col>\r\n      </Row>\r\n\r\n      {showMode === 0 && (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n          }}\r\n        >\r\n          <img src={Logo} width=\"50%\" style={{ marginTop: \"50px\" }} alt=\"\" />\r\n        </div>\r\n      )}\r\n      {showMode === 1 && <YearsGraph df={df} _years={years} />}\r\n      {showMode === 2 && <MonthsGraph df={df} _years={years} />}\r\n      {showMode === 4 && <MonthsSummaryGraph df={df} _years={years} />}\r\n\r\n      {showMode === 3 && (\r\n        <DataForm\r\n          mode={mode}\r\n          data={myDataToShow}\r\n          header={header}\r\n          func={handleForm}\r\n        />\r\n      )}\r\n\r\n      <div id=\"plot_div\" style={{ display: \"none\" }} />\r\n      <ToastMsg\r\n        show={showToast}\r\n        close={() => {\r\n          setShowToast(false);\r\n        }}\r\n        params={message}\r\n      ></ToastMsg>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default MyActivities;\r\n","import React from 'react';\r\nimport { Modal,Spinner,Button} from 'react-bootstrap';\r\n\r\n\r\nconst OnProgressModal = ({ show,message}) => {\r\n    return (\r\n      <Modal show={show} size=\"sm\" backdrop=\"static\" keyboard={false} centered>\r\n        <Button variant=\"primary\" disabled>\r\n          <Spinner\r\n            as=\"span\"\r\n            animation=\"grow\"\r\n            size=\"sm\"\r\n            role=\"status\"\r\n            aria-hidden=\"true\"\r\n          />\r\n          <span>&nbsp;&nbsp;&nbsp;</span>\r\n          {message}\r\n        </Button>\r\n      </Modal>\r\n    );\r\n  };\r\n\r\n  export default OnProgressModal","import React, { useState, useEffect } from \"react\";\r\n//import React from \"react\";\r\nimport { Route, Navigate, Link, Routes, useLocation } from \"react-router-dom\";\r\nimport { Navbar, NavItem, Button } from \"react-bootstrap\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { HouseDoor } from \"react-bootstrap-icons\";\r\n\r\nimport Homepage from \"../routes/Homepage\";\r\nimport MyActivities from \"../routes/MyActivities\";\r\nimport OnProgressModal from \"../components/OnProgressModal\";\r\n\r\nconst Navigation = ({ user, admin, callBack,progress }) => {\r\n  \r\n  const [progressShow, setProgressShow] = useState(false);\r\n\r\n  let location = useLocation();\r\n  let path = location.pathname;\r\n\r\n\r\n  \r\n  useEffect(() => {\r\n  \r\n    setProgressShow(progress);\r\n  }, [progress]);\r\n  \r\n\r\n  return (\r\n    <>\r\n      <OnProgressModal show={progressShow} message={\"Updating db...\"} />\r\n      <Navbar style={{ background: \"#091834\" }} variant=\"light\">\r\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n        <Link to=\"/\" className=\"mr-auto\">\r\n          <NavItem>\r\n            <Button variant=\"success\">\r\n              <HouseDoor color=\"white\" size={22} />\r\n            </Button>\r\n          </NavItem>\r\n        </Link>\r\n        {user && (\r\n          <>\r\n            {(path === \"/\") && (\r\n              <Link to=\"/MyActivities\" className=\"ml-auto\">\r\n                <NavItem>\r\n                  <Button variant=\"outline-warning\">Activities</Button>\r\n                </NavItem>\r\n              </Link>\r\n            )}\r\n\r\n            {(admin && (path === \"/\")) && (\r\n              <NavItem className=\"ml-auto\">\r\n                <Button\r\n                  variant=\"outline-danger\"\r\n                  onClick={() => {\r\n                    callBack(\"updateDb\");\r\n                  }}\r\n                >\r\n                  Update Db\r\n                </Button>\r\n              </NavItem>\r\n            )}\r\n\r\n            <div\r\n              className=\"ml-auto\"\r\n              style={{ paddingRight: \"15px\", color: \"darkcyan\" }}\r\n            >\r\n              {\"Logged in: \" + user}\r\n            </div>\r\n            <Link to={\"/\"}>\r\n              <NavItem>\r\n                <Button\r\n                  variant=\"dark\"\r\n                  onClick={() => {\r\n                    callBack(\"logout\");\r\n                  }}\r\n                >\r\n                  Log out\r\n                </Button>\r\n              </NavItem>\r\n            </Link>\r\n          </>\r\n        )}\r\n\r\n        {!user && (\r\n          <NavItem className=\"ml-auto\">\r\n            <Button\r\n              variant=\"info\"\r\n              onClick={() => {\r\n                callBack(\"login\");\r\n              }}\r\n            >\r\n              Log in\r\n            </Button>\r\n          </NavItem>\r\n        )}\r\n      </Navbar>\r\n\r\n      <Routes>\r\n        <Route path=\"/\" element={<Homepage />} />\r\n\r\n        <Route\r\n          path=\"/MyActivities\"\r\n          element={\r\n            user ? (\r\n              <MyActivities callBack={callBack} user={user} />\r\n            ) : (\r\n              <Navigate to=\"/\" replace />\r\n            )\r\n          }\r\n        />\r\n        <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n      </Routes>\r\n    </>\r\n  );\r\n};\r\nexport default Navigation;\r\n","import React, { useState } from 'react'\r\nimport { Form, Button, Modal } from 'react-bootstrap';\r\nimport ToastMsg from './ToastMsg';\r\n\r\nconst RegisterForm = ({ show, close, func }) => {\r\n\r\n    const [firstName, setFirstName] = useState(\"\")\r\n    const [surName, setSurName] = useState(\"\")\r\n    const [email, setEmail] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n    const [admin, setAdmin] = useState(false)\r\n\r\n    const [showToast, setShowToast] = useState(false)\r\n\r\n    const [message, setMessage] = useState({\r\n        header: '',\r\n        message: '',\r\n        autohide: true,\r\n        delay: 0,\r\n        style: {\r\n\r\n            backgroundcolor: '#00FF00',\r\n            color: 'blue'\r\n        }\r\n    });\r\n\r\n\r\n    const handleRegin = async (p) => {\r\n\r\n        if (p) {\r\n\r\n            //alert(firstName);\r\n            let regData = {\r\n                \"firstname\": firstName,\r\n                \"lastname\": surName,\r\n                \"email\": email,\r\n                \"password\": password,\r\n                \"admin\": admin\r\n            }\r\n\r\n            const data = await func(2, regData);\r\n\r\n            if (data.code !== 200) {\r\n\r\n                setMessage({\r\n                    header: 'Error',\r\n                    message: data.message,\r\n                    closeParent: false,\r\n                    autohide: true,\r\n                    style: {\r\n\r\n                        backgroundcolor: '#00FF00',\r\n                        color: 'blue'\r\n\r\n                    },\r\n                });\r\n\r\n            } else if (data.code === 200) {\r\n\r\n                setMessage({\r\n                    header: 'Sign up success',\r\n                    message: data.message,\r\n                    closeParent: true,\r\n                    autohide: true,\r\n                    style: {\r\n\r\n                        backgroundcolor: '#00FF00',\r\n                        color: 'blue'\r\n\r\n                    },\r\n                });\r\n\r\n            }\r\n\r\n            clearFields();\r\n            setShowToast(true);\r\n\r\n        }\r\n    }\r\n\r\n    const clearFields = () => {\r\n        setFirstName('');\r\n        setSurName('');\r\n        setEmail('');\r\n        setPassword('');\r\n        setAdmin(false);\r\n    }\r\n\r\n    if (show) {\r\n\r\n        return (\r\n            <>\r\n                <Form onSubmit={(event) => {\r\n                    event.preventDefault();\r\n                    handleRegin(true);\r\n                }}>\r\n                    <Modal.Body>\r\n\r\n                        <Form.Group >\r\n                            <Form.Label>Firstname</Form.Label>\r\n                            <Form.Control type=\"input\" placeholder=\"Etunimi\" value={firstName} onChange={({ target }) => setFirstName(target.value)} required />\r\n                        </Form.Group>\r\n                        <Form.Group >\r\n                            <Form.Label>Surname</Form.Label>\r\n                            <Form.Control type=\"input\" placeholder=\"Sukunimi\" value={surName} onChange={({ target }) => setSurName(target.value)} required />\r\n                        </Form.Group>\r\n                        <Form.Group >\r\n                            <Form.Label>Email</Form.Label>\r\n                            <Form.Control type=\"email\" placeholder=\"email\" value={email} onChange={({ target }) => setEmail(target.value)} required />\r\n                        </Form.Group>\r\n                        <Form.Group >\r\n                            <Form.Label>Password</Form.Label>\r\n                            <Form.Control type=\"password\" placeholder=\"Salasana\" value={password} onChange={({ target }) => setPassword(target.value)} required />\r\n                        </Form.Group>\r\n\r\n                        <Form.Group controlId=\"formBasicCheckbox\">\r\n                            <Form.Check type=\"checkbox\" label=\"Admin\" onChange={( e ) => {                                \r\n                                setAdmin(e.target.checked)}} />\r\n                        </Form.Group>\r\n\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button variant=\"secondary\" onClick={() => { close(false) }}>\r\n                            Close\r\n                        </Button>\r\n                        <Button type='Submit' variant=\"primary\">\r\n                            Ready\r\n                        </Button>\r\n                    </Modal.Footer>\r\n                </Form>\r\n\r\n                <ToastMsg show={showToast} close={() => { setShowToast(false); if (message.closeParent) close(false) }} params={message}></ToastMsg>\r\n            </>\r\n        )\r\n    } else {\r\n\r\n        return null\r\n    }\r\n}\r\n\r\nexport default RegisterForm","import React, { useState, useEffect } from 'react'\r\nimport {\r\n  Button, Modal, Form\r\n} from 'react-bootstrap';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport ToastMsg from './ToastMsg';\r\nimport RegisterForm from './RegisterForm';\r\n\r\n\r\nconst LoginDialog = ({ _show, showDialog, func }) => {\r\n\r\n  let _labels = {\r\n    title: 'Log in',\r\n    btnClose: 'Close'\r\n  }\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [show, setShow] = useState(false);\r\n  const [showRegister, setShowRegister] = useState(false);\r\n  const [labels, setLabels] = useState(_labels);\r\n\r\n  const [showToast, setShowToast] = useState(false)\r\n\r\n  const handleClose = () => { };\r\n\r\n  const [message, setMessage] = useState({\r\n    header: '',\r\n    message: '',\r\n    autohide: false,\r\n    delay: 0,\r\n    style: {\r\n\r\n      backgroundcolor: '#00FF00',\r\n      color: 'blue'\r\n    }\r\n  });\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    setLabels(labels);\r\n    setShow(_show);\r\n    if (!_show) {\r\n      setShowRegister(false);\r\n    }\r\n  }, [_show, labels])\r\n\r\n\r\n  const showRegisterForm = (p) => {\r\n\r\n    regLabels();\r\n    setShowRegister(p);\r\n\r\n  }\r\n\r\n  const regLabels = () => {\r\n\r\n    let _labels = {\r\n      title: 'Sign up',\r\n      btnClose: 'Close'\r\n    }\r\n    setLabels(_labels);\r\n  }\r\n\r\n  const logLabels = () => {\r\n\r\n    let _labels = {\r\n      title: 'Login',\r\n      btnClose: 'Close'\r\n    }\r\n    setLabels(_labels);\r\n  }\r\n\r\n\r\n  const handleLogin = async (p) => {\r\n\r\n    if (p) {\r\n\r\n      let auth = {\r\n        \"email\": email,\r\n        \"password\": password\r\n      }\r\n\r\n      let data = await func(1, auth);\r\n\r\n      if (data === null || data.code === 404 || data.code === 401) {\r\n\r\n        let message = null;\r\n        let closeParent = false;\r\n\r\n        if (data === null) {\r\n\r\n          closeParent = true;\r\n          message = \"No connection to backend\";\r\n        } else {\r\n\r\n          message = data.message;\r\n\r\n        }\r\n\r\n        setMessage({\r\n          header: 'Error',\r\n          message: message,\r\n          autohide: true,\r\n          delay: 2000,\r\n          closeParent: closeParent,\r\n          style: {\r\n\r\n            backgroundcolor: '#00FF00',\r\n            color: 'blue'\r\n\r\n          },\r\n        });\r\n\r\n        setShowToast(true);\r\n      } else if (data.code === 200) {\r\n\r\n        setMessage({\r\n          header: 'Login succesfull',\r\n          message: 'Welcome ;)',\r\n          autohide: true,\r\n          delay: 2000,\r\n          closeParent: true,\r\n          style: {\r\n\r\n            backgroundcolor: '#00FF00',\r\n            color: 'blue'\r\n\r\n          },\r\n        });\r\n\r\n        setShowToast(true);\r\n\r\n      }\r\n\r\n    } else {\r\n\r\n      showDialog(false);\r\n\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton onClick={() => { handleLogin(false) }}>\r\n          <Modal.Title>{labels.title}</Modal.Title>\r\n        </Modal.Header>\r\n\r\n        {!showRegister &&\r\n          <>\r\n            <Form onSubmit={(event) => {\r\n              event.preventDefault()\r\n              handleLogin(true)\r\n            }}>\r\n\r\n              <Modal.Body>\r\n\r\n                <Form.Group controlId=\"formBasicEmail\">\r\n                  <Form.Label>Email</Form.Label>\r\n\r\n                  <Form.Control type=\"email\" placeholder=\"Enter email\" value={email} onChange={({ target }) => setEmail(target.value)} required />\r\n                </Form.Group>\r\n                <Form.Group controlId=\"formBasicPassword\">\r\n                  <Form.Label>Password</Form.Label>\r\n                  <Form.Control type=\"password\" placeholder=\"Password\" value={password} onChange={({ target }) => setPassword(target.value)} required />\r\n                </Form.Group>\r\n\r\n              </Modal.Body>\r\n\r\n              <Modal.Footer>\r\n                <>\r\n                  <Button variant=\"warning\" className='mr-auto' onClick={() => { showRegisterForm(true) }}>\r\n                    New user\r\n                  </Button>\r\n                  <Button variant=\"secondary\" onClick={() => { handleLogin(false) }}>\r\n                    {labels.btnClose}\r\n                  </Button>\r\n                  <Button type='submit' variant=\"primary\">\r\n                    Log in\r\n                  </Button>\r\n                </>\r\n              </Modal.Footer>\r\n            </Form>\r\n          </>\r\n\r\n        }\r\n        <RegisterForm show={showRegister} close={() => {\r\n          logLabels(); setShowRegister(false);\r\n        }} func={func} />\r\n        <ToastMsg show={showToast} close={() => { setShowToast(false); if (message.closeParent) showDialog(false) }} params={message}></ToastMsg>\r\n\r\n      </Modal>\r\n    </>\r\n  )\r\n}\r\nexport default LoginDialog\r\n","import React from 'react';\r\nimport { Modal,Button} from 'react-bootstrap';\r\n\r\n\r\nconst ConfirmModal = ({ show, onHide, updateDb }) => {\r\n  \r\n  const handleAccept = () => {\r\n    onHide(false);\r\n    updateDb(true);\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      show={show}\r\n      onHide={onHide}\r\n      size=\"sm\"\r\n      aria-labelledby=\"contained-modal-title-vcenter\"  \r\n      backdrop=\"static\"\r\n    >\r\n      <Modal.Header closeButton>\r\n        <Modal.Title id=\"contained-modal-title-vcenter\">\r\n          Update the database\r\n        </Modal.Title>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <h5>Are you sure?</h5>\r\n        <p></p>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={onHide}>\r\n          No\r\n        </Button>\r\n\r\n        <Button variant=\"primary\" onClick={handleAccept}>\r\n          Yes\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ConfirmModal","import React, { useState, useEffect } from \"react\";\r\nimport { Container } from \"react-bootstrap\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport socketIOClient from \"socket.io-client\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport userService from \"./services/user-service\";\r\nimport dataService from \"./services/data-service\";\r\n\r\nimport Navigation from \"./nav/Navigation\";\r\nimport LoginDialog from \"./components/LoginDialog\";\r\nimport ConfirmModal from \"./components/ConfirmModal\";\r\n//import OnProgressModal from \"./components/OnProgressModal\";\r\n\r\nimport \"./App.css\";\r\n\r\nconst App = () => {\r\n  const [mongoData, setMongoData] = useState();\r\n  const [user, setUser] = useState(\"\");\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [admin, setAdmin] = useState(false);\r\n  const [token, setToken] = useState(\"\");\r\n\r\n  const [login, setLogin] = useState(false);\r\n  const [progressShow, setProgressShow] = useState(false);\r\n  const [confirmShow, setConfirmShow] = useState(false);\r\n  \r\n  \r\n  let navigate = useNavigate();\r\n\r\n  const getConfig = () => {\r\n    let _token = `bearer ${token}`;\r\n    const config = {\r\n      headers: { Authorization: _token },\r\n    };\r\n\r\n    return config;\r\n  };\r\n\r\n  const updateDataToMongo = async () => {\r\n    await dataService.updateDataToMongo(getConfig());\r\n  };\r\n\r\n  useEffect(() => {\r\n    let baseUrl = \"/\";\r\n    if (process.env.NODE_ENV === \"development\")\r\n      baseUrl = \"http://localhost:5000\";\r\n\r\n    const socket = socketIOClient(baseUrl);\r\n\r\n    socket.on(\"onProgress\", (p) => {\r\n      console.log(\"message from backend onProgress \" + p);\r\n      \r\n      setProgressShow(p);\r\n    });\r\n\r\n    socket.on(\"connect\", (data) => {\r\n      console.log(\"socket connected\");\r\n    });\r\n\r\n    socket.on(\"connected\", (p) => {\r\n      console.log(\"message from backend connected\" + p);\r\n    });\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    // tänne kaikki cleaning-jutut\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const getData = async () => {\r\n      let mongoData = await dataService.getDataFromMongo(getConfig());\r\n\r\n      setMongoData(mongoData);\r\n      try {\r\n        navigate(\"/MyActivities\");\r\n      } catch (exception) {\r\n        alert(exception.message);\r\n      }\r\n    };\r\n\r\n    if (user !== \"\") {\r\n      getData();\r\n    }\r\n  }, [token]);\r\n\r\n  const handleRegister = async (user) => {\r\n    const data = await userService.register(user);\r\n\r\n    return data;\r\n  };\r\n\r\n  const handleLogin = async (id, data, func) => {\r\n    if (id === 1) {\r\n      if (data !== null) {\r\n        const response = await userService.login(data);\r\n\r\n        if (response !== null) {\r\n          if (response.code === 200) {\r\n            setUser(response.data.email);\r\n            setUserName(response.data.firstname);\r\n            setAdmin(response.data.admin);\r\n            setToken(response.data.token);\r\n          }\r\n          return response;\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n    } else if (id === 2) {\r\n      return await handleRegister(data);\r\n    }\r\n  };\r\n\r\n  const callBack = async (topic, data) => {\r\n    if (topic === \"getActivitiesData\") {\r\n      return mongoData;\r\n    } else if (topic === \"updateDb\") {\r\n      updateDb();\r\n    } else if (topic === \"login\") {\r\n      setLogin(true);\r\n    } else if (topic === \"logout\") {\r\n      setUserName(\"\");\r\n    }\r\n  };\r\n\r\n  const updateDb = () => {\r\n    setConfirmShow(true);\r\n  };\r\n\r\n  const updateDatabase = async (p) => {\r\n    if (p === true) {\r\n      await updateDataToMongo();\r\n    }\r\n  };\r\n\r\n  const style = { backgroundColor: \"#353b45\" };\r\n\r\n  return (\r\n    <Container fluid className=\"App\">\r\n      <div style={style}>        \r\n        <LoginDialog\r\n          _show={login}\r\n          showDialog={setLogin}\r\n          func={handleLogin}\r\n        ></LoginDialog>\r\n\r\n        <ConfirmModal\r\n          show={confirmShow}\r\n          onHide={() => setConfirmShow(false)}\r\n          updateDb={updateDatabase}\r\n        />\r\n        {/*<OnProgressModal show={progressShow} message={\"Loading...\"} />*/}\r\n      </div>\r\n\r\n      <Navigation user={userName} admin={admin} callBack={callBack} progress={progressShow} />\r\n      \r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom'; \r\nimport './index.css';\r\nimport App from './App';\r\nimport {\r\n  BrowserRouter as Router\r\n} from 'react-router-dom'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router><App /></Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}